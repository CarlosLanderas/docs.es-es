---
title: 'Tutorial: Clasificación de infracciones sanitarias con el Generador de modelos'
description: En este tutorial se muestra cómo crear un modelo de clasificación multiclase mediante el Generador de modelos de ML.NET para clasificar la gravedad de infracciones sanitarias en restaurantes de San Francisco.
author: luisquintanilla
ms.author: luquinta
ms.date: 10/30/2019
ms.topic: tutorial
ms.custom: mvc
ms.openlocfilehash: cbe20183d317ac6fe39a937e1cfa8a5e3df81b74
ms.sourcegitcommit: f348c84443380a1959294cdf12babcb804cfa987
ms.translationtype: HT
ms.contentlocale: es-ES
ms.lasthandoff: 11/12/2019
ms.locfileid: "73977207"
---
# <a name="tutorial-classify-the-severity-of-restaurant-health-violations-with-model-builder"></a><span data-ttu-id="80d96-103">Tutorial: Clasificación de la gravedad de las infracciones sanitarias en restaurantes con el Generador de modelos</span><span class="sxs-lookup"><span data-stu-id="80d96-103">Tutorial: Classify the severity of restaurant health violations with Model Builder</span></span>

<span data-ttu-id="80d96-104">Aprenda a crear un modelo de clasificación multiclase mediante el generador de modelos para categorizar el nivel de riesgo de las infracciones de restaurantes detectadas durante inspecciones sanitarias.</span><span class="sxs-lookup"><span data-stu-id="80d96-104">Learn how to build a multiclass classification model using Model Builder to categorize the risk level of restaurant violations found during health inspections.</span></span>

<span data-ttu-id="80d96-105">En este tutorial aprenderá a:</span><span class="sxs-lookup"><span data-stu-id="80d96-105">In this tutorial, you learn how to:</span></span>

> [!div class="checklist"]
>
> - <span data-ttu-id="80d96-106">Preparar y entender los datos</span><span class="sxs-lookup"><span data-stu-id="80d96-106">Prepare and understand the data</span></span>
> - <span data-ttu-id="80d96-107">Elección de un escenario</span><span class="sxs-lookup"><span data-stu-id="80d96-107">Choose a scenario</span></span>
> - <span data-ttu-id="80d96-108">Cargar datos desde una base de datos</span><span class="sxs-lookup"><span data-stu-id="80d96-108">Load data from a database</span></span>
> - <span data-ttu-id="80d96-109">Entrenar el modelo</span><span class="sxs-lookup"><span data-stu-id="80d96-109">Train the model</span></span>
> - <span data-ttu-id="80d96-110">Evaluar el modelo</span><span class="sxs-lookup"><span data-stu-id="80d96-110">Evaluate the model</span></span>
> - <span data-ttu-id="80d96-111">Usar el modelo para las predicciones</span><span class="sxs-lookup"><span data-stu-id="80d96-111">Use the model for predictions</span></span>

> [!NOTE]
> <span data-ttu-id="80d96-112">De momento, el Generador de modelos se encuentra en versión preliminar.</span><span class="sxs-lookup"><span data-stu-id="80d96-112">Model Builder is currently in Preview.</span></span>

## <a name="prerequisites"></a><span data-ttu-id="80d96-113">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="80d96-113">Prerequisites</span></span>

<span data-ttu-id="80d96-114">Para obtener una lista de los requisitos previos e instrucciones de instalación, visite la [Guía de instalación del Generador de modelos](../how-to-guides/install-model-builder.md).</span><span class="sxs-lookup"><span data-stu-id="80d96-114">For a list of prerequisites and installation instructions, visit the [Model Builder installation guide](../how-to-guides/install-model-builder.md).</span></span>

## <a name="model-builder-multiclass-classification-overview"></a><span data-ttu-id="80d96-115">Información general de clasificación multiclase del Generador de modelos</span><span class="sxs-lookup"><span data-stu-id="80d96-115">Model Builder multiclass classification overview</span></span>

<span data-ttu-id="80d96-116">En este ejemplo se crea una aplicación de consola .NET Core de C# que categoriza el riesgo de las infracciones sanitarias mediante un modelo de aprendizaje automático creado con el Generador de modelos.</span><span class="sxs-lookup"><span data-stu-id="80d96-116">This sample creates a C# .NET Core console application that categorizes the risk of health violations using a machine learning model built with Model Builder.</span></span> <span data-ttu-id="80d96-117">Puede encontrar el código fuente para este tutorial en el repositorio [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) de GitHub.</span><span class="sxs-lookup"><span data-stu-id="80d96-117">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="create-a-console-application"></a><span data-ttu-id="80d96-118">Creación de una aplicación de consola</span><span class="sxs-lookup"><span data-stu-id="80d96-118">Create a console application</span></span>

1. <span data-ttu-id="80d96-119">Cree una **aplicación de consola .NET Core de C#** denominada "RestaurantViolations".</span><span class="sxs-lookup"><span data-stu-id="80d96-119">Create a **C# .NET Core console application** called "RestaurantViolations".</span></span>

## <a name="prepare-and-understand-the-data"></a><span data-ttu-id="80d96-120">Preparar y entender los datos</span><span class="sxs-lookup"><span data-stu-id="80d96-120">Prepare and understand the data</span></span>

> <span data-ttu-id="80d96-121">El conjunto de datos que se usa para entrenar y evaluar el modelo de aprendizaje automático proviene originalmente de [San Francisco Department of Public Health Restaurant Safety Scores](https://www.sfdph.org/dph/EH/Food/score/default.asp) (Puntuaciones de seguridad de restaurantes del Departamento de Sanidad Pública de San Francisco).</span><span class="sxs-lookup"><span data-stu-id="80d96-121">The data set used to train and evaluate the machine learning model is originally from the [San Francisco Department of Public Health Restaurant Safety Scores](https://www.sfdph.org/dph/EH/Food/score/default.asp).</span></span> <span data-ttu-id="80d96-122">Para mayor comodidad, el conjunto de datos se ha condensado para incluir solo las columnas relevantes a fin de entrenar el modelo y realizar las predicciones.</span><span class="sxs-lookup"><span data-stu-id="80d96-122">For convenience, the dataset has been condensed to only include the columns relevant to train the model and make predictions.</span></span> <span data-ttu-id="80d96-123">Visite el sitio web siguiente para obtener más información sobre el [conjunto de datos](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span><span class="sxs-lookup"><span data-stu-id="80d96-123">Visit the following website to learn more about the [dataset](https://data.sfgov.org/Health-and-Social-Services/Restaurant-Scores-LIVES-Standard/pyih-qa8i?row_index=0).</span></span>

<span data-ttu-id="80d96-124">[Descargue el conjunto de datos Restaurant Safety Scores](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) y descomprímalo.</span><span class="sxs-lookup"><span data-stu-id="80d96-124">[Download the Restaurant Safety Scores dataset](https://github.com/luisquintanilla/machinelearning-samples/raw/AB1608219/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantScores.zip) and unzip it.</span></span>

<span data-ttu-id="80d96-125">Cada fila del conjunto de datos contiene información relacionada con las infracciones observadas durante una inspección del Departamento de Sanidad y una evaluación del riesgo de la amenaza de esas infracciones para la salud pública y la seguridad.</span><span class="sxs-lookup"><span data-stu-id="80d96-125">Each row in the dataset contains information regarding violations observed during an inspection from the Health Department and a risk assessment of the threat those violations present to public health and safety.</span></span>

| <span data-ttu-id="80d96-126">InspectionType</span><span class="sxs-lookup"><span data-stu-id="80d96-126">InspectionType</span></span> | <span data-ttu-id="80d96-127">ViolationDescription</span><span class="sxs-lookup"><span data-stu-id="80d96-127">ViolationDescription</span></span> | <span data-ttu-id="80d96-128">RiskCategory</span><span class="sxs-lookup"><span data-stu-id="80d96-128">RiskCategory</span></span> |
| --- | --- | --- |
| <span data-ttu-id="80d96-129">Rutina: no programada</span><span class="sxs-lookup"><span data-stu-id="80d96-129">Routine - Unscheduled</span></span> | <span data-ttu-id="80d96-130">Superficies de contacto para alimentos limpiadas o desinfectadas incorrectamente</span><span class="sxs-lookup"><span data-stu-id="80d96-130">Inadequately cleaned or sanitized food contact surfaces</span></span> | <span data-ttu-id="80d96-131">Riesgo moderado</span><span class="sxs-lookup"><span data-stu-id="80d96-131">Moderate Risk</span></span> |
| <span data-ttu-id="80d96-132">Nuevo propietario</span><span class="sxs-lookup"><span data-stu-id="80d96-132">New Ownership</span></span> | <span data-ttu-id="80d96-133">Riesgo alto de infestación por parásitos</span><span class="sxs-lookup"><span data-stu-id="80d96-133">High risk vermin infestation</span></span> | <span data-ttu-id="80d96-134">Riesgo alto</span><span class="sxs-lookup"><span data-stu-id="80d96-134">High Risk</span></span> |
| <span data-ttu-id="80d96-135">Rutina: no programada</span><span class="sxs-lookup"><span data-stu-id="80d96-135">Routine - Unscheduled</span></span> | <span data-ttu-id="80d96-136">Paños de limpieza sucios o incorrectamente almacenados o desinfectados</span><span class="sxs-lookup"><span data-stu-id="80d96-136">Wiping cloths not clean or properly stored or inadequate sanitizer</span></span> | <span data-ttu-id="80d96-137">Riesgo bajo</span><span class="sxs-lookup"><span data-stu-id="80d96-137">Low Risk</span></span> |

- <span data-ttu-id="80d96-138">**InspectionType**: el tipo de inspección.</span><span class="sxs-lookup"><span data-stu-id="80d96-138">**InspectionType**: the type of inspection.</span></span> <span data-ttu-id="80d96-139">Esto puede ser una inspección inicial de un nuevo establecimiento, una inspección rutinaria, una inspección de quejas y otros muchos tipos.</span><span class="sxs-lookup"><span data-stu-id="80d96-139">This can either be a first-time inspection for a new establishment, a routine inspection, a complaint inspection, and many other types.</span></span>
- <span data-ttu-id="80d96-140">**ViolationDescription**: descripción de la infracción detectada durante la inspección.</span><span class="sxs-lookup"><span data-stu-id="80d96-140">**ViolationDescription**: a description of the violation found during inspection.</span></span>
- <span data-ttu-id="80d96-141">**RiskCategory**: gravedad del riesgo que supone una infracción para la seguridad y la sanidad pública.</span><span class="sxs-lookup"><span data-stu-id="80d96-141">**RiskCategory**: the risk severity a violation poses to public health and safety.</span></span>

<span data-ttu-id="80d96-142">`label` es la columna que quiere predecir.</span><span class="sxs-lookup"><span data-stu-id="80d96-142">The `label` is the column you want to predict.</span></span> <span data-ttu-id="80d96-143">Al realizar una tarea de clasificación, el objetivo es asignar una categoría (de texto o numérica).</span><span class="sxs-lookup"><span data-stu-id="80d96-143">When performing a classification task, the goal is to assign a category (text or numerical).</span></span> <span data-ttu-id="80d96-144">En este escenario de clasificación, se asigna a la gravedad de la infracción el valor de riesgo bajo, moderado o alto.</span><span class="sxs-lookup"><span data-stu-id="80d96-144">In this classification scenario, the severity of the violation is assigned the value of low, moderate, or high risk.</span></span> <span data-ttu-id="80d96-145">Por tanto, **RiskCategory** es la etiqueta.</span><span class="sxs-lookup"><span data-stu-id="80d96-145">Therefore, the **RiskCategory** is the label.</span></span> <span data-ttu-id="80d96-146">Los valores de `features` son las entradas que se proporcionan al modelo para predecir `label`.</span><span class="sxs-lookup"><span data-stu-id="80d96-146">The `features` are the inputs you give the model to predict the `label`.</span></span> <span data-ttu-id="80d96-147">En este caso, **InspectionType** y **ViolationDescription** se usan como características o entradas para predecir el valor de **RiskCategory**.</span><span class="sxs-lookup"><span data-stu-id="80d96-147">In this case, the **InspectionType** and **ViolationDescription** are used as features or inputs to predict the **RiskCategory**.</span></span>

## <a name="choose-a-scenario"></a><span data-ttu-id="80d96-148">Elección de un escenario</span><span class="sxs-lookup"><span data-stu-id="80d96-148">Choose a scenario</span></span>

![Asistente para el generador de modelos en Visual Studio](./media/sentiment-analysis-model-builder/model-builder-screen.png)

<span data-ttu-id="80d96-150">Para entrenar el modelo, seleccione en la lista de escenarios de aprendizaje automático disponibles proporcionada por el Generador de modelos.</span><span class="sxs-lookup"><span data-stu-id="80d96-150">To train your model, select from the list of available machine learning scenarios provided by Model Builder.</span></span> <span data-ttu-id="80d96-151">En este caso, el escenario es de *Clasificación de problemas*.</span><span class="sxs-lookup"><span data-stu-id="80d96-151">In this case, the scenario is *Issue Classification*.</span></span>

1. <span data-ttu-id="80d96-152">En el **Explorador de soluciones**, haga clic con el botón derecho en el proyecto *RestaurantViolations* y seleccione **Agregar** > **Machine Learning**.</span><span class="sxs-lookup"><span data-stu-id="80d96-152">In **Solution Explorer**, right-click the *RestaurantViolations* project, and select **Add** > **Machine Learning**.</span></span>
1. <span data-ttu-id="80d96-153">Para este ejemplo, el escenario es una clasificación multiclase.</span><span class="sxs-lookup"><span data-stu-id="80d96-153">For this sample, the scenario is multiclass classification.</span></span> <span data-ttu-id="80d96-154">En el paso *Escenario* del Generador de modelos, seleccione el escenario **Clasificación de problemas**.</span><span class="sxs-lookup"><span data-stu-id="80d96-154">In the *Scenario* step of Model Builder, select the **Issue Classification** scenario.</span></span>

## <a name="load-the-data"></a><span data-ttu-id="80d96-155">Carga de los datos</span><span class="sxs-lookup"><span data-stu-id="80d96-155">Load the data</span></span>

<span data-ttu-id="80d96-156">El Generador de modelos acepta datos de una base de datos de SQL Server o un archivo local en formato `csv` o `tsv`.</span><span class="sxs-lookup"><span data-stu-id="80d96-156">Model Builder accepts data from a SQL Server database or a local file in `csv` or `tsv` format.</span></span>

1. <span data-ttu-id="80d96-157">En el paso de datos de la herramienta Generador de modelos, seleccione **SQL Server** en la lista desplegable de origen de datos.</span><span class="sxs-lookup"><span data-stu-id="80d96-157">In the data step of the Model Builder tool, select **SQL Server** from the data source dropdown.</span></span>
1. <span data-ttu-id="80d96-158">Seleccione el botón situado junto al cuadro de texto **Conectarse a la base de datos SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="80d96-158">Select the button next to the **Connect to SQL Server database** text box.</span></span>
    1. <span data-ttu-id="80d96-159">En el cuadro de diálogo **Elegir datos**, seleccione **Archivo de base de datos de Microsoft SQL Server**.</span><span class="sxs-lookup"><span data-stu-id="80d96-159">In the **Choose Data** dialog, select **Microsoft SQL Server Database File**.</span></span>
    1. <span data-ttu-id="80d96-160">Desactive la casilla **Usar siempre esta selección** y seleccione **Continuar**.</span><span class="sxs-lookup"><span data-stu-id="80d96-160">Uncheck the **Always use this selection** checkbox and select **Continue**.</span></span>
    1. <span data-ttu-id="80d96-161">En el cuadro de diálogo **Propiedades de conexión**, seleccione **Examinar** y después el archivo *RestaurantScores.mdf* descargado.</span><span class="sxs-lookup"><span data-stu-id="80d96-161">In the **Connection Properties** dialog, select **Browse** and select the downloaded *RestaurantScores.mdf* file.</span></span>
    1. <span data-ttu-id="80d96-162">Seleccione **Aceptar**.</span><span class="sxs-lookup"><span data-stu-id="80d96-162">Select **OK**.</span></span>
1. <span data-ttu-id="80d96-163">Elija **Violations** (Infracciones) en el menú desplegable **Table Name** (Nombre de la tabla).</span><span class="sxs-lookup"><span data-stu-id="80d96-163">Choose **Violations** from the **Table Name** dropdown.</span></span>
1. <span data-ttu-id="80d96-164">Elija **RiskCategory** en el menú desplegable **Column to Predict (Label)** (Columna para la predicción [etiqueta]).</span><span class="sxs-lookup"><span data-stu-id="80d96-164">Choose **RiskCategory** in the **Column to Predict (Label)** dropdown.</span></span>
1. <span data-ttu-id="80d96-165">Deje las selecciones de columna predeterminadas, **InspectionType** y **ViolationDescription**,activadas en la lista desplegable **Input Columns (Features)** (Columnas de entrada (características)).</span><span class="sxs-lookup"><span data-stu-id="80d96-165">Leave the default column selections, **InspectionType** and **ViolationDescription**, checked in the **Input Columns (Features)** dropdown.</span></span>
1. <span data-ttu-id="80d96-166">Seleccione el vínculo **Entrenar** para ir al paso siguiente en el Generador de modelos.</span><span class="sxs-lookup"><span data-stu-id="80d96-166">Select the **Train** link to move to the next step in Model Builder.</span></span>

## <a name="train-the-model"></a><span data-ttu-id="80d96-167">Entrenar el modelo</span><span class="sxs-lookup"><span data-stu-id="80d96-167">Train the model</span></span>

<span data-ttu-id="80d96-168">La tarea de aprendizaje automático que se usa para entrenar el modelo de clasificación de problemas de este tutorial es la clasificación multiclase.</span><span class="sxs-lookup"><span data-stu-id="80d96-168">The machine learning task used to train the issue classification model in this tutorial is multiclass classification.</span></span> <span data-ttu-id="80d96-169">Durante el proceso de entrenamiento del modelo, el Generador de modelos entrena modelos independientes con diferentes opciones y algoritmos de clasificación multiclase para encontrar el modelo con mejor rendimiento para el conjunto de datos.</span><span class="sxs-lookup"><span data-stu-id="80d96-169">During the model training process, Model Builder trains separate models using different multiclass classification algorithms and settings to find the best performing model for your dataset.</span></span>

<span data-ttu-id="80d96-170">El tiempo necesario para el entrenamiento del modelo es proporcional a la cantidad de datos.</span><span class="sxs-lookup"><span data-stu-id="80d96-170">The time required for the model to train is proportional to the amount of data.</span></span> <span data-ttu-id="80d96-171">El generador de modelos selecciona automáticamente un valor predeterminado para **Tiempo de entrenamiento (segundos)** en función del tamaño del origen de datos.</span><span class="sxs-lookup"><span data-stu-id="80d96-171">Model Builder automatically selects a default value for **Time to train (seconds)** based on the size of your data source.</span></span>

1. <span data-ttu-id="80d96-172">Aunque el Generador de modelos establezca el valor de **Tiempo de entrenamiento (segundos)** en 10 segundos, debe aumentarlo a 30 segundos.</span><span class="sxs-lookup"><span data-stu-id="80d96-172">Although Model Builder sets the value of **Time to train (seconds)** to 10 seconds, increase it to 30 seconds.</span></span> <span data-ttu-id="80d96-173">El entrenamiento durante un período de tiempo más prolongado permite que el Generador de modelos explore un mayor número de algoritmos y combinación de parámetros en la búsqueda del mejor modelo.</span><span class="sxs-lookup"><span data-stu-id="80d96-173">Training for a longer period of time allows Model Builder to explore a larger number of algorithms and combination of parameters in search of the best model.</span></span>
1. <span data-ttu-id="80d96-174">Seleccione **Iniciar entrenamiento**.</span><span class="sxs-lookup"><span data-stu-id="80d96-174">Select **Start Training**.</span></span>

    <span data-ttu-id="80d96-175">Durante el proceso de entrenamiento, los datos de progreso se muestran en la sección `Progress` del paso de entrenamiento.</span><span class="sxs-lookup"><span data-stu-id="80d96-175">Throughout the training process, progress data is displayed in the `Progress` section of the train step.</span></span>

    - <span data-ttu-id="80d96-176">En **Estado** se muestra el grado de finalización del proceso de entrenamiento.</span><span class="sxs-lookup"><span data-stu-id="80d96-176">**Status** displays the completion status of the training process.</span></span>
    - <span data-ttu-id="80d96-177">En **Mejor precisión** se muestra la precisión del modelo con mejor rendimiento que ha encontrado el Generador de modelos hasta el momento.</span><span class="sxs-lookup"><span data-stu-id="80d96-177">**Best accuracy** displays the accuracy of the best performing model found by Model Builder so far.</span></span> <span data-ttu-id="80d96-178">Una mayor precisión significa que el modelo realiza una predicción más correcta de los datos de prueba.</span><span class="sxs-lookup"><span data-stu-id="80d96-178">Higher accuracy means the model predicted more correctly on test data.</span></span>
    - <span data-ttu-id="80d96-179">En **Mejor algoritmo** se muestra el nombre del algoritmo con mejor rendimiento que ha encontrado el Generador de modelos hasta el momento.</span><span class="sxs-lookup"><span data-stu-id="80d96-179">**Best algorithm** displays the name of the best-performing algorithm found by Model Builder so far.</span></span>
    - <span data-ttu-id="80d96-180">En **Último algoritmo** se muestra el nombre del algoritmo que ha usado más recientemente el Generador de modelos para entrenar el modelo.</span><span class="sxs-lookup"><span data-stu-id="80d96-180">**Last algorithm** displays the name of the algorithm most recently used by Model Builder to train the model.</span></span>

1. <span data-ttu-id="80d96-181">Una vez que se ha completado el entrenamiento, seleccione el vínculo de **evaluación** para ir al paso siguiente.</span><span class="sxs-lookup"><span data-stu-id="80d96-181">Once training is complete, select the **Evaluate** link to move to the next step.</span></span>

## <a name="evaluate-the-model"></a><span data-ttu-id="80d96-182">Evaluar el modelo</span><span class="sxs-lookup"><span data-stu-id="80d96-182">Evaluate the model</span></span>

<span data-ttu-id="80d96-183">El resultado del paso de entrenamiento es el modelo que ha tenido el mejor rendimiento.</span><span class="sxs-lookup"><span data-stu-id="80d96-183">The result of the training step is the one model that had the best performance.</span></span> <span data-ttu-id="80d96-184">En el paso de evaluación del Generador de modelos, la sección de salida contiene el algoritmo usado por el modelo con el mejor rendimiento en la entrada **Mejor modelo** junto con las métricas en **Modelo de mayor precisión**.</span><span class="sxs-lookup"><span data-stu-id="80d96-184">In the evaluate step of Model Builder, the output section contains the algorithm used by the best performing model in the **Best Model** entry along with metrics in **Best Model Accuracy**.</span></span> <span data-ttu-id="80d96-185">Además, se muestra una tabla de resumen que contiene hasta cinco modelos que se han explorado y sus métricas.</span><span class="sxs-lookup"><span data-stu-id="80d96-185">Additionally, a summary table containing up to five models that were explored and their metrics is displayed.</span></span>

<span data-ttu-id="80d96-186">Si no está satisfecho con las métricas de precisión, una forma sencilla de intentar mejorar la precisión del modelo es aumentar la cantidad de tiempo para entrenar el modelo o usar más datos.</span><span class="sxs-lookup"><span data-stu-id="80d96-186">If you're not satisfied with your accuracy metrics, some easy ways to try to improve model accuracy are to increase the amount of time to train the model or use more data.</span></span> <span data-ttu-id="80d96-187">En caso contrario, seleccione el vínculo de **código** para ir al paso final del Generador de modelos.</span><span class="sxs-lookup"><span data-stu-id="80d96-187">Otherwise, select the **code** link to move to the final step in Model Builder.</span></span>

## <a name="add-the-code-to-make-predictions"></a><span data-ttu-id="80d96-188">Incorporación del código para hacer predicciones</span><span class="sxs-lookup"><span data-stu-id="80d96-188">Add the code to make predictions</span></span>

<span data-ttu-id="80d96-189">Como resultado del proceso de entrenamiento se crean dos proyectos.</span><span class="sxs-lookup"><span data-stu-id="80d96-189">Two projects are created as a result of the training process.</span></span>

- <span data-ttu-id="80d96-190">RestaurantViolationsML.ConsoleApp: una aplicación de consola .NET Core de C# que contiene el entrenamiento del modelo y código de consumo de ejemplo.</span><span class="sxs-lookup"><span data-stu-id="80d96-190">RestaurantViolationsML.ConsoleApp: A C# .NET Core Console application that contains the model training and sample consumption code.</span></span>
- <span data-ttu-id="80d96-191">RestaurantViolationsML.Model: una biblioteca de clases de .NET Standard que contiene los modelos de datos que definen el esquema de los datos de modelo de entrada y salida, la versión guardada del modelo con mejor rendimiento durante el entrenamiento y una clase auxiliar llamada `ConsumeModel` para realizar predicciones.</span><span class="sxs-lookup"><span data-stu-id="80d96-191">RestaurantViolationsML.Model: A .NET Standard class library containing the data models that define the schema of input and output model data, the saved version of the best performing model during training, and a helper class called `ConsumeModel` to make predictions.</span></span>

1. <span data-ttu-id="80d96-192">En el paso de código del Generador de modelos, seleccione **Agregar proyectos** para agregar a la solución los proyectos generados de forma automática.</span><span class="sxs-lookup"><span data-stu-id="80d96-192">In the code step of Model Builder, select **Add Projects** to add the autogenerated projects to the solution.</span></span>
1. <span data-ttu-id="80d96-193">Abra el archivo *Program.cs* en el proyecto *RestaurantViolations*.</span><span class="sxs-lookup"><span data-stu-id="80d96-193">Open the *Program.cs* file in the *RestaurantViolations* project.</span></span>
1. <span data-ttu-id="80d96-194">Agregue la instrucción using siguiente para hacer referencia al proyecto *RestaurantViolationsML.Model*:</span><span class="sxs-lookup"><span data-stu-id="80d96-194">Add the following using statement to reference the *RestaurantViolationsML.Model* project:</span></span>

    [!code-csharp [ProgramUsings](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L2)]

1. <span data-ttu-id="80d96-195">Para hacer una predicción según los datos nuevos con el modelo, cree una instancia nueva de la clase `ModelInput` dentro del método `Main` de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="80d96-195">To make a prediction on new data using the model, create a new instance of the `ModelInput` class inside the `Main` method of your application.</span></span> <span data-ttu-id="80d96-196">Observe que la categoría de riesgo no forma parte de la entrada.</span><span class="sxs-lookup"><span data-stu-id="80d96-196">Notice that the risk category is not part of the input.</span></span> <span data-ttu-id="80d96-197">Esto se debe a que el modelo genera la predicción para ella.</span><span class="sxs-lookup"><span data-stu-id="80d96-197">This is because the model generates the prediction for it.</span></span>

    [!code-csharp [TestData](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L11-L15)]

1. <span data-ttu-id="80d96-198">Use el método `Predict` de la clase `ConsumeModel`.</span><span class="sxs-lookup"><span data-stu-id="80d96-198">Use the `Predict` method from the `ConsumeModel` class.</span></span> <span data-ttu-id="80d96-199">El método `Predict` carga el modelo entrenado, crea un objeto [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) para el modelo y lo usa para realizar predicciones sobre los datos nuevos.</span><span class="sxs-lookup"><span data-stu-id="80d96-199">The `Predict` method loads the trained model, creates a [`PredictionEngine`](xref:Microsoft.ML.PredictionEngine%602) for the model, and uses it to make predictions on new data.</span></span>

    [!code-csharp [Prediction](~/machinelearning-samples/samples/modelbuilder/MulticlassClassification_RestaurantViolations/RestaurantViolations/Program.cs#L17-L24)]

1. <span data-ttu-id="80d96-200">Ejecute la aplicación.</span><span class="sxs-lookup"><span data-stu-id="80d96-200">Run the application.</span></span>

    <span data-ttu-id="80d96-201">La salida generada por el programa debe ser similar al siguiente fragmento de código:</span><span class="sxs-lookup"><span data-stu-id="80d96-201">The output generated by the program should look similar to the snippet below:</span></span>

    ```bash
    Inspection Type: Complaint
    Violation Description: Inadequate sewage or wastewater disposal
    Risk Category: Moderate Risk
    ```

<span data-ttu-id="80d96-202">Si tiene que hacer referencia a los proyectos generados en un momento posterior dentro de otra solución, puede encontrarlos en el directorio `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools`.</span><span class="sxs-lookup"><span data-stu-id="80d96-202">If you need to reference the generated projects at a later time inside of another solution, you can find them inside the `C:\Users\%USERNAME%\AppData\Local\Temp\MLVSTools` directory.</span></span>

<span data-ttu-id="80d96-203">¡Enhorabuena!</span><span class="sxs-lookup"><span data-stu-id="80d96-203">Congratulations!</span></span> <span data-ttu-id="80d96-204">Ha creado correctamente un modelo de aprendizaje automático para categorizar el riesgo de infracciones sanitarias mediante el Generador de modelos.</span><span class="sxs-lookup"><span data-stu-id="80d96-204">You've successfully built a machine learning model to categorize the risk of health violations using Model Builder.</span></span> <span data-ttu-id="80d96-205">Puede encontrar el código fuente para este tutorial en el repositorio [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) de GitHub.</span><span class="sxs-lookup"><span data-stu-id="80d96-205">You can find the source code for this tutorial at the [dotnet/machinelearning-samples](https://github.com/dotnet/machinelearning-samples/tree/master/samples/modelbuilder/MulticlassClassification_RestaurantViolations) GitHub repository.</span></span>

## <a name="additional-resources"></a><span data-ttu-id="80d96-206">Recursos adicionales</span><span class="sxs-lookup"><span data-stu-id="80d96-206">Additional resources</span></span>

<span data-ttu-id="80d96-207">Para más información sobre los temas mencionados en este tutorial, visite estos recursos:</span><span class="sxs-lookup"><span data-stu-id="80d96-207">To learn more about topics mentioned in this tutorial, visit the following resources:</span></span>

- [<span data-ttu-id="80d96-208">Escenarios del Generador de modelos</span><span class="sxs-lookup"><span data-stu-id="80d96-208">Model Builder Scenarios</span></span>](../automate-training-with-model-builder.md#scenarios)
- [<span data-ttu-id="80d96-209">Clasificación multiclase</span><span class="sxs-lookup"><span data-stu-id="80d96-209">Multiclass Classification</span></span>](../resources/glossary.md#multiclass-classification)
- [<span data-ttu-id="80d96-210">Métricas de modelos de clasificación multiclase</span><span class="sxs-lookup"><span data-stu-id="80d96-210">Multiclass Classification Model Metrics</span></span>](../resources/metrics.md#metrics-for-multi-class-classification)
