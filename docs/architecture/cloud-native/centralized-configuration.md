---
title: Configuración centralizada
description: La configuración centralizada mediante Azure Key Vault puede facilitar la administración de aplicaciones nativas en la nube.
ms.date: 06/30/2019
ms.openlocfilehash: 4c516b6773d913acd71ff06742302e9766a141e2
ms.sourcegitcommit: 56f1d1203d0075a461a10a301459d3aa452f4f47
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/24/2019
ms.locfileid: "73841142"
---
# <a name="centralized-configuration"></a><span data-ttu-id="5931d-103">Configuración centralizada</span><span class="sxs-lookup"><span data-stu-id="5931d-103">Centralized configuration</span></span>

[!INCLUDE [book-preview](../../../includes/book-preview.md)]

<span data-ttu-id="5931d-104">Las aplicaciones nativas de la nube implican muchos más servicios en ejecución que las aplicaciones monolíticas de una sola instancia tradicionales.</span><span class="sxs-lookup"><span data-stu-id="5931d-104">Cloud-native applications involve many more running services than traditional single-instance monolithic apps.</span></span> <span data-ttu-id="5931d-105">La administración de los valores de configuración para docenas de servicios interdependientes puede ser complicada, por lo que a menudo los almacenes de configuración centralizados se implementan para aplicaciones distribuidas.</span><span class="sxs-lookup"><span data-stu-id="5931d-105">Managing configuration settings for dozens of interdependent services can be challenging, which is why centralized configuration stores are often implemented for distributed applications.</span></span>

<span data-ttu-id="5931d-106">Como se describe en el [capítulo 1](introduction.md), las recomendaciones de la aplicación de doce factores requieren una separación estricta entre el código y la configuración.</span><span class="sxs-lookup"><span data-stu-id="5931d-106">As discussed in [Chapter 1](introduction.md), the Twelve-Factor App recommendations require strict separation between code and configuration.</span></span> <span data-ttu-id="5931d-107">Esto significa que el almacenamiento de los valores de configuración como constantes o valores literales en el código es una infracción.</span><span class="sxs-lookup"><span data-stu-id="5931d-107">This means storing configuration settings as constants or literal values in code is a violation.</span></span> <span data-ttu-id="5931d-108">Esta recomendación existe porque el mismo código debe usarse en varios entornos, incluidos el desarrollo, la prueba, el almacenamiento provisional y la producción.</span><span class="sxs-lookup"><span data-stu-id="5931d-108">This recommendation exists because the same code should be used across multiple environments, including development, testing, staging, and production.</span></span> <span data-ttu-id="5931d-109">Sin embargo, es probable que los valores de configuración varíen entre cada uno de estos entornos.</span><span class="sxs-lookup"><span data-stu-id="5931d-109">However, configuration values are likely to vary between each of these environments.</span></span> <span data-ttu-id="5931d-110">Por lo tanto, los valores de configuración deben almacenarse en el propio entorno o el entorno debe almacenar las credenciales en un almacén de configuración centralizado.</span><span class="sxs-lookup"><span data-stu-id="5931d-110">So, configuration values should be stored in the environment itself, or the environment should store the credentials to a centralized configuration store.</span></span>

<span data-ttu-id="5931d-111">La aplicación eShopOnContainers incluye los archivos de configuración de la aplicación local con cada microservicio.</span><span class="sxs-lookup"><span data-stu-id="5931d-111">The eShopOnContainers application includes local application settings files with each microservice.</span></span> <span data-ttu-id="5931d-112">Estos archivos se protegen en el control de código fuente, pero no incluyen secretos de producción, como cadenas de conexión o claves de API.</span><span class="sxs-lookup"><span data-stu-id="5931d-112">These files are checked into source control but don't include production secrets such as connection strings or API keys.</span></span> <span data-ttu-id="5931d-113">En producción, se puede sobrescribir la configuración individual con variables de entorno por servicio.</span><span class="sxs-lookup"><span data-stu-id="5931d-113">In production, individual settings may be overwritten with per-service environment variables.</span></span> <span data-ttu-id="5931d-114">Esta es una práctica común para las aplicaciones hospedadas, pero no proporciona un almacén de configuración central.</span><span class="sxs-lookup"><span data-stu-id="5931d-114">This is a common practice for hosted applications, but doesn't provide a central configuration store.</span></span> <span data-ttu-id="5931d-115">Para admitir la administración centralizada de las opciones de configuración, cada microservicio incluye una configuración para alternar entre el uso de la configuración local o la configuración de Azure Key Vault.</span><span class="sxs-lookup"><span data-stu-id="5931d-115">To support centralized management of configuration settings, each microservice includes a setting to toggle between its use of local settings or Azure Key Vault settings.</span></span>

## <a name="azure-key-vault"></a><span data-ttu-id="5931d-116">Azure Key Vault</span><span class="sxs-lookup"><span data-stu-id="5931d-116">Azure Key Vault</span></span>

<span data-ttu-id="5931d-117">Azure Key Vault proporciona almacenamiento seguro de tokens, contraseñas, certificados, claves de API y otros secretos confidenciales.</span><span class="sxs-lookup"><span data-stu-id="5931d-117">Azure Key Vault provides secure storage of tokens, passwords, certificates, API keys, and other sensitive secrets.</span></span> <span data-ttu-id="5931d-118">El acceso a Key Vault requiere la autenticación y autorización adecuadas del llamador, que en el caso de los microservicios eShopOnContainers, significa el uso de una combinación de ClientId/ClientSecret.</span><span class="sxs-lookup"><span data-stu-id="5931d-118">Access to Key Vault requires proper caller authentication and authorization, which in the case of the eShopOnContainers microservices means the use of a ClientId/ClientSecret combination.</span></span> <span data-ttu-id="5931d-119">No proteja estas credenciales en el control de código fuente, sino que en el entorno de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="5931d-119">Don't check in these credentials into source control, but instead set in the application's environment.</span></span> <span data-ttu-id="5931d-120">El acceso directo a Key Vault desde AKS se puede lograr mediante [key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span><span class="sxs-lookup"><span data-stu-id="5931d-120">Direct access to Key Vault from AKS can be achieved using [Key Vault FlexVolume](https://github.com/Azure/kubernetes-keyvault-flexvol).</span></span>

<span data-ttu-id="5931d-121">Con la configuración centralizada, la configuración que se aplica a toda la aplicación, como el extremo de registro centralizado, se puede establecer una vez y usar en cada parte de la aplicación distribuida.</span><span class="sxs-lookup"><span data-stu-id="5931d-121">With centralized configuration, settings that apply to the entire application, such as the centralized logging endpoint, can be set once and used by every part of the distributed application.</span></span> <span data-ttu-id="5931d-122">Aunque los microservicios deben ser independientes entre sí, normalmente habrá algunas dependencias compartidas cuyos detalles de configuración pueden beneficiarse de un almacén de configuración centralizado.</span><span class="sxs-lookup"><span data-stu-id="5931d-122">Although microservices should be independent of one another, there will typically still be some shared dependencies whose configuration details can benefit from a centralized configuration store.</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="5931d-123">[Anterior](deploy-eshoponcontainers-azure.md)
>[Siguiente](scale-applications.md)</span><span class="sxs-lookup"><span data-stu-id="5931d-123">[Previous](deploy-eshoponcontainers-azure.md)
[Next](scale-applications.md)</span></span>
