---
title: Escalado de contenedores y aplicaciones sin servidor
description: Escalado de aplicaciones nativas en la nube con Azure Kubernetes Service para satisfacer la demanda de los usuarios mediante el aumento de los recursos individuales del equipo o el aumento del número de máquinas en un clúster de aplicaciones.
ms.date: 09/23/2019
ms.openlocfilehash: 2d0537fb3ed56beb4eccbf9b8c34a5d87793413b
ms.sourcegitcommit: 55f438d4d00a34b9aca9eedaac3f85590bb11565
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 09/23/2019
ms.locfileid: "73841016"
---
# <a name="scaling-containers-and-serverless-applications"></a><span data-ttu-id="dbbfa-103">Escalado de contenedores y aplicaciones sin servidor</span><span class="sxs-lookup"><span data-stu-id="dbbfa-103">Scaling containers and serverless applications</span></span>

<span data-ttu-id="dbbfa-104">Hay dos formas típicas de escalar una aplicación: escalar verticalmente y escalar horizontalmente. El primero hace referencia a la adición de funcionalidades a un host, mientras que la última hace referencia a agregar al número total de hosts.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-104">There are two typical ways to scale an application: scaling up and scaling out. The former refers to adding capabilities to one host, while the latter refers to adding to the total number of hosts.</span></span> <span data-ttu-id="dbbfa-105">Una analogía común que se usa para pensar en esto es cómo conseguirse a usted mismo y a algunos amigos de la ciudad.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-105">A common analogy to use to think about this is how to get yourself and some friends across town.</span></span> <span data-ttu-id="dbbfa-106">Si solo es un amigo, podría saltar a su coche de carreras de dos plazas.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-106">If it's just one friend, you could hop into your two-seat race car.</span></span> <span data-ttu-id="dbbfa-107">Pero si es tres o cuatro, es posible que necesite realizar una de las SUVs o un furgoneta, escalando verticalmente para aumentar la capacidad.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-107">But if it's three or four, you might need to take one of your SUVs or a minivan, scaling up to increase capacity.</span></span> <span data-ttu-id="dbbfa-108">Sin embargo, cuando el número total salta hasta una docena o más, es probable que necesite realizar varios vehículos (a menos que alguien impulse un bus), que muestra el concepto de escalado horizontal mediante la adición de más instancias (en este caso, más vehículos).</span><span class="sxs-lookup"><span data-stu-id="dbbfa-108">When your total number jumps up to a dozen or more, though, you probably need to take multiple vehicles (unless someone drives a bus), which demonstrates the concept of scaling out by adding more instances (in this case, more vehicles).</span></span> <span data-ttu-id="dbbfa-109">Veamos cómo se aplica a nuestras aplicaciones.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-109">Let's see how this applies to our applications.</span></span>

## <a name="the-simple-solution-scaling-up"></a><span data-ttu-id="dbbfa-110">Solución simple: escalado vertical</span><span class="sxs-lookup"><span data-stu-id="dbbfa-110">The simple solution: scaling up</span></span>

<span data-ttu-id="dbbfa-111">El proceso de actualización de los servidores existentes para darles más recursos (CPU, memoria, velocidad de e/s de disco, velocidad de e/s de red) se conoce como *escalado*vertical.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-111">The process of upgrading existing servers to give them more resources (CPU, memory, disk I/O speed, network I/O speed) is known as *scaling up*.</span></span> <span data-ttu-id="dbbfa-112">En las aplicaciones nativas de la nube, el escalado vertical no se refiere normalmente a la compra e instalación de hardware real en máquinas físicas, así que elegir un plan más capaz en una lista de opciones disponibles.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-112">In cloud-native applications, scaling up doesn't typically refer to purchasing and installing actual hardware on physical machines so much as choosing a more capable plan from a list of options available.</span></span> <span data-ttu-id="dbbfa-113">Normalmente, las aplicaciones nativas en la nube se escalan verticalmente mediante la modificación del tamaño de la máquina virtual (VM) que se usa para hospedar los nodos individuales en el grupo de nodos de Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-113">Cloud-native apps typically scale up by modifying the virtual machine (VM) size used to host the individual nodes in their Kubernetes node pool.</span></span> <span data-ttu-id="dbbfa-114">Los conceptos de Kubernetes, como los nodos, los clústeres y los pods se describen en [la sección siguiente](leverage-containers-orchestrators.md).</span><span class="sxs-lookup"><span data-stu-id="dbbfa-114">Kubernetes concepts like nodes, clusters, and pods are described further in [the next section](leverage-containers-orchestrators.md).</span></span> <span data-ttu-id="dbbfa-115">Azure admite una amplia variedad de tamaños de máquina virtual que ejecutan [Windows](https://docs.microsoft.com/azure/virtual-machines/windows/sizes?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) y [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/sizes).</span><span class="sxs-lookup"><span data-stu-id="dbbfa-115">Azure supports a wide variety of VM sizes running both [Windows](https://docs.microsoft.com/azure/virtual-machines/windows/sizes?toc=%2fazure%2fvirtual-machines%2fwindows%2ftoc.json) and [Linux](https://docs.microsoft.com/azure/virtual-machines/linux/sizes).</span></span> <span data-ttu-id="dbbfa-116">Para escalar verticalmente la aplicación, cree un nuevo grupo de nodos con un tamaño de máquina virtual de nodo mayor y, a continuación, migre las cargas de trabajo al nuevo grupo.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-116">To vertically scale your application, create a new node pool with a larger node VM size and then migrate workloads to the new pool.</span></span> <span data-ttu-id="dbbfa-117">Esto requiere [varios grupos de nodos para el clúster de AKS](https://docs.microsoft.com/azure/aks/use-multiple-node-pools), una característica que se encuentra actualmente en versión preliminar.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-117">This requires [multiple node pools for your AKS cluster](https://docs.microsoft.com/azure/aks/use-multiple-node-pools), a feature that is currently in preview.</span></span> <span data-ttu-id="dbbfa-118">Las aplicaciones sin servidor se escalan verticalmente eligiendo un [plan Premium](https://docs.microsoft.com/azure/azure-functions/functions-scale) y tamaños de instancia Premium o eligiendo un plan de App Service dedicado diferente.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-118">Serverless apps scale up by choosing a [premium plan](https://docs.microsoft.com/azure/azure-functions/functions-scale) and premium instance sizes or by choosing a different dedicated app service plan.</span></span>

## <a name="scaling-out-cloud-native-apps"></a><span data-ttu-id="dbbfa-119">Escalado horizontal de aplicaciones nativas en la nube</span><span class="sxs-lookup"><span data-stu-id="dbbfa-119">Scaling out cloud-native apps</span></span>

<span data-ttu-id="dbbfa-120">Las aplicaciones nativas para la nube admiten el escalado horizontal mediante la adición de nodos o pods adicionales a las solicitudes de servicio.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-120">Cloud-native apps support scaling out by adding additional nodes or pods to service requests.</span></span> <span data-ttu-id="dbbfa-121">Esto puede realizarse manualmente ajustando los valores de configuración de la aplicación (por ejemplo, [escalando un grupo de nodos](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)) o mediante el *escalado automático*.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-121">This can be accomplished manually by adjusting configuration settings for the app (for example, [scaling a node pool](https://docs.microsoft.com/azure/aks/use-multiple-node-pools#scale-a-node-pool-manually)), or through *autoscaling*.</span></span> <span data-ttu-id="dbbfa-122">El escalado automático ajusta los recursos usados por una aplicación para responder a la demanda, de forma similar a como un termostato responde a la temperatura mediante una llamada a para calefacción o refrigeración adicional.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-122">Autoscaling adjusts the resources used by an app in order to respond to demand, similar to how a thermostat responds to temperature by calling for additional heating or cooling.</span></span> <span data-ttu-id="dbbfa-123">Al usar el escalado automático, se deshabilita el escalado manual.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-123">When using autoscaling, manual scaling is disabled.</span></span>

<span data-ttu-id="dbbfa-124">Los clústeres de AKS se pueden escalar de una de estas dos maneras:</span><span class="sxs-lookup"><span data-stu-id="dbbfa-124">AKS clusters can scale in one of two ways:</span></span>

- <span data-ttu-id="dbbfa-125">El [escalador automático del clúster](https://docs.microsoft.com/azure/aks/cluster-autoscaler) supervisa los pods que no se pueden programar en los nodos debido a las restricciones de recursos.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-125">The [cluster autoscaler](https://docs.microsoft.com/azure/aks/cluster-autoscaler) watches for pods that can't be scheduled on nodes because of resource constraints.</span></span> <span data-ttu-id="dbbfa-126">Agrega nodos adicionales según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-126">It adds additional nodes as required.</span></span>
- <span data-ttu-id="dbbfa-127">El **escalador automático del Pod horizontal** usa el servidor de métricas en un clúster de Kubernetes para supervisar las demandas de recursos de los pods.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-127">The **horizontal pod autoscaler** uses the Metrics Server in a Kubernetes cluster to monitor the resource demands of pods.</span></span> <span data-ttu-id="dbbfa-128">Si un servicio necesita más recursos, el escalado automático aumenta el número de pods.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-128">If a service needs more resources, the autoscaler increases the number of pods.</span></span>

<span data-ttu-id="dbbfa-129">En la figura 3-13 se muestra la relación entre estos dos servicios de escalado.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-129">Figure 3-13 shows the relationship between these two scaling services.</span></span>

![Escalado horizontal de un plan de App Service.](./media/aks-cluster-autoscaler.png)

<span data-ttu-id="dbbfa-131">**Figura 3-13**.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-131">**Figure 3-13**.</span></span> <span data-ttu-id="dbbfa-132">Escalado horizontal de un plan de App Service.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-132">Scaling out an App Service plan.</span></span>

<span data-ttu-id="dbbfa-133">Estos servicios también pueden reducir el número de pods o nodos según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-133">These services can also reduce the number of pods or nodes as needed.</span></span> <span data-ttu-id="dbbfa-134">Estos dos servicios pueden funcionar juntos y, a menudo, se implementan juntos en un clúster.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-134">These two services can work together and are often deployed together in a cluster.</span></span> <span data-ttu-id="dbbfa-135">Cuando se combina, el escalador automático del Pod horizontal se centra en ejecutar el número de pods necesarios para satisfacer la demanda de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-135">When combined, the horizontal pod autoscaler is focused on running the number of pods required to meet application demand.</span></span> <span data-ttu-id="dbbfa-136">El escalador automático del clúster se centra en ejecutar el número de nodos necesarios para admitir los pods programados.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-136">The cluster autoscaler is focused on running the number of nodes required to support the scheduled pods.</span></span>

### <a name="scaling-azure-functions"></a><span data-ttu-id="dbbfa-137">Azure Functions de escalado</span><span class="sxs-lookup"><span data-stu-id="dbbfa-137">Scaling Azure Functions</span></span>

<span data-ttu-id="dbbfa-138">Azure Functions admite automáticamente el escalado horizontal. El plan de consumo predeterminado agrega (y quita) recursos dinámicamente en función del número de eventos que entran en la activación.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-138">Azure Functions automatically supports scaling out. The default consumption plan adds (and removes) resources dynamically based on the number of triggering events coming in.</span></span> <span data-ttu-id="dbbfa-139">Solo se le cobrará por los recursos de proceso que se usan cuando se ejecutan las funciones en función del número de ejecuciones, el tiempo de ejecución y la memoria usada.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-139">You're only charged for compute resources being used when your functions are running based on the number of executions, execution time, and memory used.</span></span> <span data-ttu-id="dbbfa-140">Con el plan Premium, obtiene estas mismas características, pero también puede controlar los tamaños de instancia que se usan, tener instancias ya preparadas (para evitar retrasos de inicio en frío) y configurar máquinas virtuales dedicadas en las que ejecutar las funciones.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-140">Using the premium plan, you get these same features but you can also control the instance sizes that are used, have instances already warmed up (to avoid cold start delays), and configure dedicated VMs on which to run your functions.</span></span> <span data-ttu-id="dbbfa-141">Aunque la configuración predeterminada debe proporcionar una solución económica y escalable para la mayoría de las aplicaciones, la opción Premium permite a los desarrolladores disponer de flexibilidad para los requisitos de Azure Functions personalizados.</span><span class="sxs-lookup"><span data-stu-id="dbbfa-141">While the default configuration should provide an economical and scalable solution for most apps, the premium option allows developers flexibility for custom Azure Functions requirements.</span></span>

## <a name="references"></a><span data-ttu-id="dbbfa-142">Referencias</span><span class="sxs-lookup"><span data-stu-id="dbbfa-142">References</span></span>

- [<span data-ttu-id="dbbfa-143">Grupos de varios nodos de AKS</span><span class="sxs-lookup"><span data-stu-id="dbbfa-143">AKS Multiple Node Pools</span></span>](https://docs.microsoft.com/azure/aks/use-multiple-node-pools)
- [<span data-ttu-id="dbbfa-144">Escalador automático de clústeres de AKS</span><span class="sxs-lookup"><span data-stu-id="dbbfa-144">AKS Cluster Autoscaler</span></span>](https://docs.microsoft.com/azure/aks/cluster-autoscaler)
- [<span data-ttu-id="dbbfa-145">Tutorial: escalado de aplicaciones en AKS</span><span class="sxs-lookup"><span data-stu-id="dbbfa-145">Tutorial: Scale applications in AKS</span></span>](https://docs.microsoft.com/azure/aks/tutorial-kubernetes-scale)
- [<span data-ttu-id="dbbfa-146">Escalado y hospedaje Azure Functions</span><span class="sxs-lookup"><span data-stu-id="dbbfa-146">Azure Functions scale and hosting</span></span>](https://docs.microsoft.com/azure/azure-functions/functions-scale)

>[!div class="step-by-step"]
><span data-ttu-id="dbbfa-147">[Anterior](deploy-containers-azure.md)
>[Siguiente](other-deployment-options.md)</span><span class="sxs-lookup"><span data-stu-id="dbbfa-147">[Previous](deploy-containers-azure.md)
[Next](other-deployment-options.md)</span></span>
