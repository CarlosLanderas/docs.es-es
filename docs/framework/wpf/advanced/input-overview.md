---
title: Información general sobre acciones del usuario
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- commands [WPF]
- input [WPF], overview
- keyboard focus [WPF]
- keyboard input [WPF]
- touch events [WPF]
- event routing [WPF]
- touch input [WPF]
- manipulation [WPF]
- logical focus [WPF]
- stylus input [WPF]
- text input [WPF]
- input events [WPF], handling
- WPF [WPF], input overview
- manipulation events [WPF]
- mouse input [WPF]
- mouse capture [WPF]
- focus [WPF]
- mouse position [WPF]
ms.assetid: ee5258b7-6567-415a-9b1c-c0cbe46e79ef
ms.openlocfilehash: a90c74542c1a6604ed27d37f882385b67402dd92
ms.sourcegitcommit: eff6adb61852369ab690f3f047818c90580e7eb1
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 10/07/2019
ms.locfileid: "72005033"
---
# <a name="input-overview"></a><span data-ttu-id="0b559-102">Información general sobre acciones del usuario</span><span class="sxs-lookup"><span data-stu-id="0b559-102">Input Overview</span></span>
<a name="introduction"></a><span data-ttu-id="0b559-103">El subsistema de [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] proporciona una API eficaz para obtener datos de una variedad de dispositivos, como el mouse, el teclado, el toque y el lápiz óptico.</span><span class="sxs-lookup"><span data-stu-id="0b559-103">The [!INCLUDE[TLA#tla_winclient](../../../../includes/tlasharptla-winclient-md.md)] subsystem provides a powerful API for obtaining input from a variety of devices, including the mouse, keyboard, touch, and stylus.</span></span> <span data-ttu-id="0b559-104">En este tema se describen los servicios que proporciona [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] y se explica la arquitectura de los sistemas de entrada.</span><span class="sxs-lookup"><span data-stu-id="0b559-104">This topic describes the services provided by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] and explains the architecture of the input systems.</span></span>

<a name="input_api"></a>
## <a name="input-api"></a><span data-ttu-id="0b559-105">API de entrada</span><span class="sxs-lookup"><span data-stu-id="0b559-105">Input API</span></span>
 <span data-ttu-id="0b559-106">La exposición de la API de entrada principal se encuentra en las clases de elementos base: <xref:System.Windows.UIElement>, <xref:System.Windows.ContentElement>, <xref:System.Windows.FrameworkElement>y <xref:System.Windows.FrameworkContentElement>.</span><span class="sxs-lookup"><span data-stu-id="0b559-106">The primary input API exposure is found on the base element classes: <xref:System.Windows.UIElement>, <xref:System.Windows.ContentElement>, <xref:System.Windows.FrameworkElement>, and <xref:System.Windows.FrameworkContentElement>.</span></span>  <span data-ttu-id="0b559-107">Para obtener más información sobre los elementos base, consulte [Información general sobre los elementos base](base-elements-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-107">For more information about the base elements, see [Base Elements Overview](base-elements-overview.md).</span></span>  <span data-ttu-id="0b559-108">Estas clases proporcionan funcionalidad para los eventos de entrada relacionados con las pulsaciones de teclas, los botones del mouse, la rueda del mouse, el movimiento del mouse, la administración del foco, la captura del mouse, etc.</span><span class="sxs-lookup"><span data-stu-id="0b559-108">These classes provide functionality for input events related to key presses, mouse buttons, mouse wheel, mouse movement, focus management, and mouse capture, to name a few.</span></span> <span data-ttu-id="0b559-109">Mediante la colocación de la API de entrada en los elementos base, en lugar de tratar todos los eventos de entrada como un servicio, la arquitectura de entrada permite que los eventos de entrada estén originados por un objeto determinado en la interfaz de usuario y para admitir un esquema de enrutamiento de eventos en el que más de un elemento tiene un opp ortunity para controlar un evento de entrada.</span><span class="sxs-lookup"><span data-stu-id="0b559-109">By placing the input API on the base elements, rather than treating all input events as a service, the input architecture enables the input events to be sourced by a particular object in the UI, and to support an event routing scheme whereby more than one element has an opportunity to handle an input event.</span></span> <span data-ttu-id="0b559-110">Muchos eventos de entrada tienen un par de eventos asociados.</span><span class="sxs-lookup"><span data-stu-id="0b559-110">Many input events have a pair of events associated with them.</span></span>  <span data-ttu-id="0b559-111">Por ejemplo, el evento de tecla abajo se asocia a los eventos <xref:System.Windows.Input.Keyboard.KeyDown> y <xref:System.Windows.Input.Keyboard.PreviewKeyDown>.</span><span class="sxs-lookup"><span data-stu-id="0b559-111">For example, the key down event is associated with the <xref:System.Windows.Input.Keyboard.KeyDown> and <xref:System.Windows.Input.Keyboard.PreviewKeyDown> events.</span></span>  <span data-ttu-id="0b559-112">La diferencia entre estos eventos radica en cómo se redirigen al elemento de destino.</span><span class="sxs-lookup"><span data-stu-id="0b559-112">The difference in these events is in how they are routed to the target element.</span></span>  <span data-ttu-id="0b559-113">Los eventos de vista previa tunelizan el árbol de elementos desde el elemento raíz al de destino.</span><span class="sxs-lookup"><span data-stu-id="0b559-113">Preview events tunnel down the element tree from the root element to the target element.</span></span>  <span data-ttu-id="0b559-114">Los eventos de propagación se propagan del elemento de destino al elemento raíz.</span><span class="sxs-lookup"><span data-stu-id="0b559-114">Bubbling events bubble up from the target element to the root element.</span></span>  <span data-ttu-id="0b559-115">El enrutamiento de eventos en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] se describe con más detalle más adelante, dentro de esta información general, y en [Información general sobre eventos enrutados](routed-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-115">Event routing in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] is discussed in more detail later in this overview and in the [Routed Events Overview](routed-events-overview.md).</span></span>

### <a name="keyboard-and-mouse-classes"></a><span data-ttu-id="0b559-116">Clases Keyboard y Mouse</span><span class="sxs-lookup"><span data-stu-id="0b559-116">Keyboard and Mouse Classes</span></span>
 <span data-ttu-id="0b559-117">Además de la API de entrada en las clases de elementos base, la clase <xref:System.Windows.Input.Keyboard> y las clases <xref:System.Windows.Input.Mouse> proporcionan una API adicional para trabajar con la entrada del mouse y del teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-117">In addition to the input API on the base element classes, the <xref:System.Windows.Input.Keyboard> class and <xref:System.Windows.Input.Mouse> classes provide additional API for working with keyboard and mouse input.</span></span>

 <span data-ttu-id="0b559-118">Ejemplos de la API de entrada en la clase <xref:System.Windows.Input.Keyboard> son la propiedad <xref:System.Windows.Input.Keyboard.Modifiers%2A>, que devuelve el <xref:System.Windows.Input.ModifierKeys> que se está presionando actualmente y el método <xref:System.Windows.Input.Keyboard.IsKeyDown%2A>, que determina si se presiona una tecla especificada.</span><span class="sxs-lookup"><span data-stu-id="0b559-118">Examples of input API on the <xref:System.Windows.Input.Keyboard> class are the <xref:System.Windows.Input.Keyboard.Modifiers%2A> property, which returns the <xref:System.Windows.Input.ModifierKeys> currently pressed, and the <xref:System.Windows.Input.Keyboard.IsKeyDown%2A> method, which determines whether a specified key is pressed.</span></span>

 <span data-ttu-id="0b559-119">En el ejemplo siguiente se usa el método <xref:System.Windows.Input.Keyboard.GetKeyStates%2A> para determinar si un <xref:System.Windows.Input.Key> está en estado inactivo.</span><span class="sxs-lookup"><span data-stu-id="0b559-119">The following example uses the <xref:System.Windows.Input.Keyboard.GetKeyStates%2A> method to determine if a <xref:System.Windows.Input.Key> is in the down state.</span></span>

 [!code-csharp[keyargssnippetsample#KeyEventArgsKeyBoardGetKeyStates](~/samples/snippets/csharp/VS_Snippets_Wpf/KeyArgsSnippetSample/CSharp/Window1.xaml.cs#keyeventargskeyboardgetkeystates)]
 [!code-vb[keyargssnippetsample#KeyEventArgsKeyBoardGetKeyStates](~/samples/snippets/visualbasic/VS_Snippets_Wpf/KeyArgsSnippetSample/visualbasic/window1.xaml.vb#keyeventargskeyboardgetkeystates)]

 <span data-ttu-id="0b559-120">Los ejemplos de la API de entrada en la clase <xref:System.Windows.Input.Mouse> son <xref:System.Windows.Input.Mouse.MiddleButton%2A>, que obtiene el estado del botón central del mouse y <xref:System.Windows.Input.Mouse.DirectlyOver%2A>, que obtiene el elemento sobre el que está actualmente el puntero del mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-120">Examples of input API on the <xref:System.Windows.Input.Mouse> class are <xref:System.Windows.Input.Mouse.MiddleButton%2A>, which obtains the state of the middle mouse button, and <xref:System.Windows.Input.Mouse.DirectlyOver%2A>, which gets the element the mouse pointer is currently over.</span></span>

 <span data-ttu-id="0b559-121">En el ejemplo siguiente se determina si el <xref:System.Windows.Input.Mouse.LeftButton%2A> del mouse está en el estado <xref:System.Windows.Input.MouseButtonState.Pressed>.</span><span class="sxs-lookup"><span data-stu-id="0b559-121">The following example determines whether the <xref:System.Windows.Input.Mouse.LeftButton%2A> on the mouse is in the <xref:System.Windows.Input.MouseButtonState.Pressed> state.</span></span>

 [!code-csharp[mouserelatedsnippets#MouseRelatedSnippetsGetLeftButtonMouse](~/samples/snippets/csharp/VS_Snippets_Wpf/MouseRelatedSnippets/CSharp/Window1.xaml.cs#mouserelatedsnippetsgetleftbuttonmouse)]
 [!code-vb[mouserelatedsnippets#MouseRelatedSnippetsGetLeftButtonMouse](~/samples/snippets/visualbasic/VS_Snippets_Wpf/MouseRelatedSnippets/visualbasic/window1.xaml.vb#mouserelatedsnippetsgetleftbuttonmouse)]

 <span data-ttu-id="0b559-122">Las clases <xref:System.Windows.Input.Mouse> y <xref:System.Windows.Input.Keyboard> se describen con más detalle a lo largo de esta introducción.</span><span class="sxs-lookup"><span data-stu-id="0b559-122">The <xref:System.Windows.Input.Mouse> and <xref:System.Windows.Input.Keyboard> classes are covered in more detail throughout this overview.</span></span>

### <a name="stylus-input"></a><span data-ttu-id="0b559-123">Entrada del lápiz</span><span class="sxs-lookup"><span data-stu-id="0b559-123">Stylus Input</span></span>
 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="0b559-124">tiene compatibilidad integrada con la <xref:System.Windows.Input.Stylus>.</span><span class="sxs-lookup"><span data-stu-id="0b559-124">has integrated support for the <xref:System.Windows.Input.Stylus>.</span></span>  <span data-ttu-id="0b559-125">El <xref:System.Windows.Input.Stylus> es una entrada manuscrita que el Tablet PC ha utilizado.</span><span class="sxs-lookup"><span data-stu-id="0b559-125">The <xref:System.Windows.Input.Stylus> is a pen input made popular by the Tablet PC.</span></span>  [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="0b559-126">aplicaciones pueden tratar el lápiz como un mouse mediante la API del mouse, pero [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] también expone una abstracción del dispositivo de lápiz óptico que usa un modelo similar al teclado y el mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-126">applications can treat the stylus as a mouse by using the mouse API, but [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] also exposes a stylus device abstraction that use a model similar to the keyboard and mouse.</span></span>  <span data-ttu-id="0b559-127">Todas las API relacionadas con el lápiz óptico contienen la palabra "Stylus".</span><span class="sxs-lookup"><span data-stu-id="0b559-127">All stylus-related APIs contain the word "Stylus".</span></span>

 <span data-ttu-id="0b559-128">Dado que el lápiz puede actuar como un mouse, las aplicaciones que solo admiten la entrada de mouse pueden tener cierto nivel de compatibilidad con el lápiz automáticamente.</span><span class="sxs-lookup"><span data-stu-id="0b559-128">Because the stylus can act as a mouse, applications that support only mouse input can still obtain some level of stylus support automatically.</span></span> <span data-ttu-id="0b559-129">Cuando se usa el lápiz de esta forma, la aplicación tiene la oportunidad de controlar el evento de lápiz adecuado y, a continuación, el evento de mouse correspondiente.</span><span class="sxs-lookup"><span data-stu-id="0b559-129">When the stylus is used in such a manner, the application is given the opportunity to handle the appropriate stylus event and then handles the corresponding mouse event.</span></span> <span data-ttu-id="0b559-130">Además, los servicios de nivel superior, como las entradas manuscritas, también están disponibles a través de la abstracción del dispositivo de lápiz.</span><span class="sxs-lookup"><span data-stu-id="0b559-130">In addition, higher-level services such as ink input are also available through the stylus device abstraction.</span></span>  <span data-ttu-id="0b559-131">Para obtener más información sobre la escritura con lápiz como entrada, consulte [Introducción a las entradas manuscritas](getting-started-with-ink.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-131">For more information about ink as input, see [Getting Started with Ink](getting-started-with-ink.md).</span></span>

<a name="event_routing"></a>
## <a name="event-routing"></a><span data-ttu-id="0b559-132">Enrutamiento de eventos</span><span class="sxs-lookup"><span data-stu-id="0b559-132">Event Routing</span></span>
 <span data-ttu-id="0b559-133">Un <xref:System.Windows.FrameworkElement> puede contener otros elementos como elementos secundarios en su modelo de contenido, formando un árbol de elementos.</span><span class="sxs-lookup"><span data-stu-id="0b559-133">A <xref:System.Windows.FrameworkElement> can contain other elements as child elements in its content model, forming a tree of elements.</span></span>  <span data-ttu-id="0b559-134">En [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], el elemento primario puede participar en la entrada dirigida a sus elementos secundarios o a otros descendientes al controlar los eventos.</span><span class="sxs-lookup"><span data-stu-id="0b559-134">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], the parent element can participate in input directed to its child elements or other descendants by handing events.</span></span> <span data-ttu-id="0b559-135">Esto es especialmente útil para crear controles a partir de los controles más pequeños, un proceso conocido como "composición de controles" o "composición".</span><span class="sxs-lookup"><span data-stu-id="0b559-135">This is especially useful for building controls out of smaller controls, a process known as "control composition" or "compositing."</span></span> <span data-ttu-id="0b559-136">Para obtener más información acerca de los árboles de elementos y cómo se relacionan con las rutas de eventos, consulte [Árboles en WPF](trees-in-wpf.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-136">For more information about element trees and how element trees relate to event routes, see [Trees in WPF](trees-in-wpf.md).</span></span>

 <span data-ttu-id="0b559-137">El enrutamiento de eventos es el proceso de reenviar eventos a varios elementos para que un objeto o elemento determinado de la ruta pueda elegir ofrecer una respuesta significativa (a través del control) a un evento que podría tener su origen en otro elemento.</span><span class="sxs-lookup"><span data-stu-id="0b559-137">Event routing is the process of forwarding events to multiple elements, so that a particular object or element along the route can choose to offer a significant response (through handling) to an event that might have been sourced by a different element.</span></span>  <span data-ttu-id="0b559-138">Los eventos enrutados usan uno de los tres mecanismos de enrutamiento: directo, propagación y tunelización.</span><span class="sxs-lookup"><span data-stu-id="0b559-138">Routed events use one of three routing mechanisms: direct, bubbling, and tunneling.</span></span>  <span data-ttu-id="0b559-139">En el enrutamiento directo, el elemento de origen es el único elemento notificado y el evento no se redirige a ningún otro elemento.</span><span class="sxs-lookup"><span data-stu-id="0b559-139">In direct routing, the source element is the only element notified, and the event is not routed to any other elements.</span></span> <span data-ttu-id="0b559-140">Sin embargo, el evento enrutado directo todavía ofrece algunas funcionalidades adicionales que solo están presentes para los eventos enrutados en lugar de los eventos CLR estándar.</span><span class="sxs-lookup"><span data-stu-id="0b559-140">However, the direct routed event still offers some additional capabilities that are only present for routed events as opposed to standard CLR events.</span></span> <span data-ttu-id="0b559-141">La propagación prepara el árbol de elementos: en primer lugar, notifica al elemento que dio origen al evento; a continuación, al elemento primario, etc.</span><span class="sxs-lookup"><span data-stu-id="0b559-141">Bubbling works up the element tree by first notifying the element that sourced the event, then the parent element, and so on.</span></span>  <span data-ttu-id="0b559-142">La tunelización comienza en la raíz del árbol de elementos y desciende para acabar con el elemento de origen original.</span><span class="sxs-lookup"><span data-stu-id="0b559-142">Tunneling starts at the root of the element tree and works down, ending with the original source element.</span></span>  <span data-ttu-id="0b559-143">Para obtener más información sobre los eventos enrutados, vea [Información general sobre eventos enrutados](routed-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-143">For more information about routed events, see [Routed Events Overview](routed-events-overview.md).</span></span>

 <span data-ttu-id="0b559-144">Los eventos de entrada de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] suelen encontrarse en parejas formadas por un evento de tunelización y otro de propagación.</span><span class="sxs-lookup"><span data-stu-id="0b559-144">[!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input events generally come in pairs that consists of a tunneling event and a bubbling event.</span></span>  <span data-ttu-id="0b559-145">Los eventos de tunelización se distinguen de los eventos de propagación con el prefijo "Preview".</span><span class="sxs-lookup"><span data-stu-id="0b559-145">Tunneling events are distinguished from bubbling events with the "Preview" prefix.</span></span>  <span data-ttu-id="0b559-146">Por ejemplo, <xref:System.Windows.Input.Mouse.PreviewMouseMove> es la versión de tunelización de un evento de movimiento del mouse y <xref:System.Windows.Input.Mouse.MouseMove> es la versión de propagación de este evento.</span><span class="sxs-lookup"><span data-stu-id="0b559-146">For instance, <xref:System.Windows.Input.Mouse.PreviewMouseMove> is the tunneling version of a mouse move event and <xref:System.Windows.Input.Mouse.MouseMove> is the bubbling version of this event.</span></span> <span data-ttu-id="0b559-147">Este emparejamiento de eventos es una convención que se implementa en el nivel de elemento y no es una funcionalidad propia del sistema de eventos de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0b559-147">This event pairing is a convention that is implemented at the element level and is not an inherent capability of the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] event system.</span></span> <span data-ttu-id="0b559-148">Para obtener más información, consulte la sección Eventos de entrada de WPF en [Información general sobre eventos enrutados](routed-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-148">For details, see the WPF Input Events section in [Routed Events Overview](routed-events-overview.md).</span></span>

<a name="handling_input_events"></a>
## <a name="handling-input-events"></a><span data-ttu-id="0b559-149">Control de eventos de entrada</span><span class="sxs-lookup"><span data-stu-id="0b559-149">Handling Input Events</span></span>
 <span data-ttu-id="0b559-150">Para recibir una entrada en un elemento, se debe asociar un controlador de eventos con el evento concreto.</span><span class="sxs-lookup"><span data-stu-id="0b559-150">To receive input on an element, an event handler must be associated with that particular event.</span></span>  <span data-ttu-id="0b559-151">En [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] es sencillo: se debe hacer referencia al nombre del evento como atributo del elemento que se escuchará para este evento.</span><span class="sxs-lookup"><span data-stu-id="0b559-151">In [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] this is straightforward: you reference the name of the event as an attribute of the element that will be listening for this event.</span></span>  <span data-ttu-id="0b559-152">A continuación, se establece el valor del atributo con el nombre del controlador de eventos que se define, en función de un delegado.</span><span class="sxs-lookup"><span data-stu-id="0b559-152">Then, you set the value of the attribute to the name of the event handler that you define, based on a delegate.</span></span>  <span data-ttu-id="0b559-153">El controlador de eventos debe escribirse en código como C# y puede incluirse en un archivo de código subyacente.</span><span class="sxs-lookup"><span data-stu-id="0b559-153">The event handler must be written in code such as C# and can be included in a code-behind file.</span></span>

 <span data-ttu-id="0b559-154">Los eventos de teclado tienen lugar cuando el sistema operativo notifica acciones de teclas que se producen mientras el foco del teclado está en un elemento.</span><span class="sxs-lookup"><span data-stu-id="0b559-154">Keyboard events occur when the operating system reports key actions that occur while keyboard focus is on an element.</span></span> <span data-ttu-id="0b559-155">Los eventos de mouse y lápiz se dividen en dos categorías: eventos que informan de cambios en la posición del puntero en relación con el elemento y eventos que informan de cambios en el estado de los botones del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0b559-155">Mouse and stylus events each fall into two categories: events that report changes in pointer position relative to the element, and events that report changes in the state of device buttons.</span></span>

### <a name="keyboard-input-event-example"></a><span data-ttu-id="0b559-156">Ejemplo de evento de entrada de teclado</span><span class="sxs-lookup"><span data-stu-id="0b559-156">Keyboard Input Event Example</span></span>
 <span data-ttu-id="0b559-157">En el ejemplo siguiente se escucha una pulsación de tecla de flecha izquierda.</span><span class="sxs-lookup"><span data-stu-id="0b559-157">The following example listens for a left arrow key press.</span></span>  <span data-ttu-id="0b559-158">Se crea un <xref:System.Windows.Controls.StackPanel> que tiene un <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="0b559-158">A <xref:System.Windows.Controls.StackPanel> is created that has a <xref:System.Windows.Controls.Button>.</span></span>  <span data-ttu-id="0b559-159">Un controlador de eventos para escuchar la tecla de flecha izquierda se adjunta a la instancia de <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="0b559-159">An event handler to listen for the left arrow key press is attached to the <xref:System.Windows.Controls.Button> instance.</span></span>

 <span data-ttu-id="0b559-160">La primera sección del ejemplo crea el <xref:System.Windows.Controls.StackPanel> y el <xref:System.Windows.Controls.Button> y asocia el controlador de eventos para el <xref:System.Windows.UIElement.KeyDown>.</span><span class="sxs-lookup"><span data-stu-id="0b559-160">The first section of the example creates the <xref:System.Windows.Controls.StackPanel> and the <xref:System.Windows.Controls.Button> and attaches the event handler for the <xref:System.Windows.UIElement.KeyDown>.</span></span>

 [!code-xaml[InputOvw#Input_OvwKeyboardExampleXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml#input_ovwkeyboardexamplexaml)]

 [!code-csharp[InputOvw#Input_OvwKeyboardExampleUICodeBehind](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml.cs#input_ovwkeyboardexampleuicodebehind)]
 [!code-vb[InputOvw#Input_OvwKeyboardExampleUICodeBehind](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InputOvw/VisualBasic/Page1.xaml.vb#input_ovwkeyboardexampleuicodebehind)]

 <span data-ttu-id="0b559-161">La segunda sección está escrita en código y define el controlador de eventos.</span><span class="sxs-lookup"><span data-stu-id="0b559-161">The second section is written in code and defines the event handler.</span></span>  <span data-ttu-id="0b559-162">Cuando se presiona la tecla de dirección izquierda y el <xref:System.Windows.Controls.Button> tiene el foco de teclado, el controlador se ejecuta y se cambia el color <xref:System.Windows.Controls.Control.Background%2A> de la <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="0b559-162">When the left arrow key is pressed and the <xref:System.Windows.Controls.Button> has keyboard focus, the handler runs and the <xref:System.Windows.Controls.Control.Background%2A> color of the <xref:System.Windows.Controls.Button> is changed.</span></span>  <span data-ttu-id="0b559-163">Si se presiona la tecla, pero no es la tecla de dirección izquierda, el color <xref:System.Windows.Controls.Control.Background%2A> del <xref:System.Windows.Controls.Button> se vuelve a cambiar a su color inicial.</span><span class="sxs-lookup"><span data-stu-id="0b559-163">If the key is pressed, but it is not the left arrow key, the <xref:System.Windows.Controls.Control.Background%2A> color of the <xref:System.Windows.Controls.Button> is changed back to its starting color.</span></span>

 [!code-csharp[InputOvw#Input_OvwKeyboardExampleHandlerCodeBehind](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml.cs#input_ovwkeyboardexamplehandlercodebehind)]
 [!code-vb[InputOvw#Input_OvwKeyboardExampleHandlerCodeBehind](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InputOvw/VisualBasic/Page1.xaml.vb#input_ovwkeyboardexamplehandlercodebehind)]

### <a name="mouse-input-event-example"></a><span data-ttu-id="0b559-164">Ejemplo de evento de entrada de mouse</span><span class="sxs-lookup"><span data-stu-id="0b559-164">Mouse Input Event Example</span></span>
 <span data-ttu-id="0b559-165">En el ejemplo siguiente, se cambia el color <xref:System.Windows.Controls.Control.Background%2A> de un <xref:System.Windows.Controls.Button> cuando el puntero del Mouse entra en el <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="0b559-165">In the following example, the <xref:System.Windows.Controls.Control.Background%2A> color of a <xref:System.Windows.Controls.Button> is changed when the mouse pointer enters the <xref:System.Windows.Controls.Button>.</span></span>  <span data-ttu-id="0b559-166">El color <xref:System.Windows.Controls.Control.Background%2A> se restaura cuando el mouse sale de la <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="0b559-166">The <xref:System.Windows.Controls.Control.Background%2A> color is restored when the mouse leaves the <xref:System.Windows.Controls.Button>.</span></span>

 <span data-ttu-id="0b559-167">La primera sección del ejemplo crea el <xref:System.Windows.Controls.StackPanel> y el <xref:System.Windows.Controls.Button> control y asocia los controladores de eventos para los eventos <xref:System.Windows.UIElement.MouseEnter> y <xref:System.Windows.UIElement.MouseLeave> al <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="0b559-167">The first section of the example creates the <xref:System.Windows.Controls.StackPanel> and the <xref:System.Windows.Controls.Button> control and attaches the event handlers for the <xref:System.Windows.UIElement.MouseEnter> and <xref:System.Windows.UIElement.MouseLeave> events to the <xref:System.Windows.Controls.Button>.</span></span>

 [!code-xaml[InputOvw#Input_OvwMouseExampleXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml#input_ovwmouseexamplexaml)]

 [!code-csharp[InputOvw#Input_OvwMouseExampleUICodeBehind](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml.cs#input_ovwmouseexampleuicodebehind)]
 [!code-vb[InputOvw#Input_OvwMouseExampleUICodeBehind](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InputOvw/VisualBasic/Page1.xaml.vb#input_ovwmouseexampleuicodebehind)]

 <span data-ttu-id="0b559-168">La segunda sección del ejemplo está escrita en código y define los controladores de eventos.</span><span class="sxs-lookup"><span data-stu-id="0b559-168">The second section of the example is written in code and defines the event handlers.</span></span>  <span data-ttu-id="0b559-169">Cuando el Mouse entra en el <xref:System.Windows.Controls.Button>, se cambia el color <xref:System.Windows.Controls.Control.Background%2A> de la <xref:System.Windows.Controls.Button> a <xref:System.Windows.Media.Brushes.SlateGray%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-169">When the mouse enters the <xref:System.Windows.Controls.Button>, the <xref:System.Windows.Controls.Control.Background%2A> color of the <xref:System.Windows.Controls.Button> is changed to <xref:System.Windows.Media.Brushes.SlateGray%2A>.</span></span>  <span data-ttu-id="0b559-170">Cuando el mouse sale del <xref:System.Windows.Controls.Button>, se vuelve a cambiar el color <xref:System.Windows.Controls.Control.Background%2A> de la <xref:System.Windows.Controls.Button> a <xref:System.Windows.Media.Brushes.AliceBlue%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-170">When the mouse leaves the <xref:System.Windows.Controls.Button>, the <xref:System.Windows.Controls.Control.Background%2A> color of the <xref:System.Windows.Controls.Button> is changed back to <xref:System.Windows.Media.Brushes.AliceBlue%2A>.</span></span>

 [!code-csharp[InputOvw#Input_OvwMouseExampleEneterHandler](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml.cs#input_ovwmouseexampleeneterhandler)]
 [!code-vb[InputOvw#Input_OvwMouseExampleEneterHandler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InputOvw/VisualBasic/Page1.xaml.vb#input_ovwmouseexampleeneterhandler)]

 [!code-csharp[InputOvw#Input_OvwMouseExampleLeaveHandler](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml.cs#input_ovwmouseexampleleavehandler)]
 [!code-vb[InputOvw#Input_OvwMouseExampleLeaveHandler](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InputOvw/VisualBasic/Page1.xaml.vb#input_ovwmouseexampleleavehandler)]

<a name="text_input"></a>
## <a name="text-input"></a><span data-ttu-id="0b559-171">Entrada de texto</span><span class="sxs-lookup"><span data-stu-id="0b559-171">Text Input</span></span>
 <span data-ttu-id="0b559-172">El evento <xref:System.Windows.ContentElement.TextInput> permite escuchar la entrada de texto de forma independiente del dispositivo.</span><span class="sxs-lookup"><span data-stu-id="0b559-172">The <xref:System.Windows.ContentElement.TextInput> event enables you to listen for text input in a device-independent manner.</span></span> <span data-ttu-id="0b559-173">El teclado es el medio principal de entrada de texto, pero la voz, la escritura a mano y otros dispositivos de entrada también pueden generar entradas de texto.</span><span class="sxs-lookup"><span data-stu-id="0b559-173">The keyboard is the primary means of text input, but speech, handwriting, and other input devices can generate text input also.</span></span>

 <span data-ttu-id="0b559-174">En el caso de la entrada de teclado, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] envía primero el <xref:System.Windows.ContentElement.KeyDown>adecuado /eventos de <xref:System.Windows.ContentElement.KeyUp>.</span><span class="sxs-lookup"><span data-stu-id="0b559-174">For keyboard input, [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] first sends the appropriate <xref:System.Windows.ContentElement.KeyDown>/<xref:System.Windows.ContentElement.KeyUp> events.</span></span> <span data-ttu-id="0b559-175">Si no se controlan esos eventos y la clave es textual (en lugar de una tecla de control como flechas direccionales o teclas de función), se genera un evento <xref:System.Windows.ContentElement.TextInput>.</span><span class="sxs-lookup"><span data-stu-id="0b559-175">If those events are not handled and the key is textual (rather than a control key such as directional arrows or function keys), then a <xref:System.Windows.ContentElement.TextInput> event is raised.</span></span>  <span data-ttu-id="0b559-176">No siempre hay una asignación uno a uno simple entre <xref:System.Windows.ContentElement.KeyDown>/<xref:System.Windows.ContentElement.KeyUp> y eventos <xref:System.Windows.ContentElement.TextInput> porque varias pulsaciones de tecla pueden generar un solo carácter de entrada de texto y las pulsaciones de teclas únicas pueden generar cadenas de varios caracteres.</span><span class="sxs-lookup"><span data-stu-id="0b559-176">There is not always a simple one-to-one mapping between <xref:System.Windows.ContentElement.KeyDown>/<xref:System.Windows.ContentElement.KeyUp> and <xref:System.Windows.ContentElement.TextInput> events because multiple keystrokes can generate a single character of text input and single keystrokes can generate multi-character strings.</span></span>  <span data-ttu-id="0b559-177">Esto es especialmente cierto en el caso de idiomas como chino, Japonés y coreano que usan editores de métodos de entrada (IME) para generar los miles de caracteres posibles en sus alfabetos correspondientes.</span><span class="sxs-lookup"><span data-stu-id="0b559-177">This is especially true for languages such as Chinese, Japanese, and Korean which use Input Method Editors (IMEs) to generate the thousands of possible characters in their corresponding alphabets.</span></span>

 <span data-ttu-id="0b559-178">Cuando [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] envía un <xref:System.Windows.ContentElement.KeyUp>/evento de <xref:System.Windows.ContentElement.KeyDown>, <xref:System.Windows.Input.KeyEventArgs.Key%2A> se establece en <xref:System.Windows.Input.Key.System?displayProperty=nameWithType> si las pulsaciones de teclas pueden formar parte de un evento de <xref:System.Windows.ContentElement.TextInput> (por ejemplo, si se presiona ALT + S).</span><span class="sxs-lookup"><span data-stu-id="0b559-178">When [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] sends a <xref:System.Windows.ContentElement.KeyUp>/<xref:System.Windows.ContentElement.KeyDown> event, <xref:System.Windows.Input.KeyEventArgs.Key%2A> is set to <xref:System.Windows.Input.Key.System?displayProperty=nameWithType> if the keystrokes could become part of a <xref:System.Windows.ContentElement.TextInput> event (if ALT+S is pressed, for example).</span></span> <span data-ttu-id="0b559-179">Esto permite que el código de un controlador de eventos <xref:System.Windows.ContentElement.KeyDown> busque <xref:System.Windows.Input.Key.System?displayProperty=nameWithType> y, si se encuentra, deje el procesamiento del controlador del evento <xref:System.Windows.ContentElement.TextInput> que se produce posteriormente.</span><span class="sxs-lookup"><span data-stu-id="0b559-179">This allows code in a <xref:System.Windows.ContentElement.KeyDown> event handler to check for <xref:System.Windows.Input.Key.System?displayProperty=nameWithType> and, if found, leave processing for the handler of the subsequently raised <xref:System.Windows.ContentElement.TextInput> event.</span></span> <span data-ttu-id="0b559-180">En estos casos, se pueden usar las distintas propiedades del argumento <xref:System.Windows.Input.TextCompositionEventArgs> para determinar las pulsaciones de teclas originales.</span><span class="sxs-lookup"><span data-stu-id="0b559-180">In these cases, the various properties of the <xref:System.Windows.Input.TextCompositionEventArgs> argument can be used to determine the original keystrokes.</span></span> <span data-ttu-id="0b559-181">Del mismo modo, si un IME está activo, <xref:System.Windows.Input.Key> tiene el valor de <xref:System.Windows.Input.Key.ImeProcessed?displayProperty=nameWithType>y <xref:System.Windows.Input.KeyEventArgs.ImeProcessedKey%2A> proporciona la pulsación de tecla o pulsaciones de teclas originales.</span><span class="sxs-lookup"><span data-stu-id="0b559-181">Similarly, if an IME is active, <xref:System.Windows.Input.Key> has the value of <xref:System.Windows.Input.Key.ImeProcessed?displayProperty=nameWithType>, and <xref:System.Windows.Input.KeyEventArgs.ImeProcessedKey%2A> gives the original keystroke or keystrokes.</span></span>

 <span data-ttu-id="0b559-182">En el ejemplo siguiente se define un controlador para el evento <xref:System.Windows.Controls.Primitives.ButtonBase.Click> y un controlador para el evento <xref:System.Windows.UIElement.KeyDown>.</span><span class="sxs-lookup"><span data-stu-id="0b559-182">The following example defines a handler for the <xref:System.Windows.Controls.Primitives.ButtonBase.Click> event and a handler for the <xref:System.Windows.UIElement.KeyDown> event.</span></span>

 <span data-ttu-id="0b559-183">El primer segmento de código o marcado crea la interfaz de usuario.</span><span class="sxs-lookup"><span data-stu-id="0b559-183">The first segment of code or markup creates the user interface.</span></span>

 [!code-xaml[InputOvw#Input_OvwTextInputXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml#input_ovwtextinputxaml)]

 [!code-csharp[InputOvw#Input_OvwTextInputUICodeBehind](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml.cs#input_ovwtextinputuicodebehind)]
 [!code-vb[InputOvw#Input_OvwTextInputUICodeBehind](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InputOvw/VisualBasic/Page1.xaml.vb#input_ovwtextinputuicodebehind)]

 <span data-ttu-id="0b559-184">El segundo segmento de código contiene los controladores de eventos.</span><span class="sxs-lookup"><span data-stu-id="0b559-184">The second segment of code contains the event handlers.</span></span>

 [!code-csharp[InputOvw#Input_OvwTextInputHandlersCodeBehind](~/samples/snippets/csharp/VS_Snippets_Wpf/InputOvw/CSharp/Page1.xaml.cs#input_ovwtextinputhandlerscodebehind)]
 [!code-vb[InputOvw#Input_OvwTextInputHandlersCodeBehind](~/samples/snippets/visualbasic/VS_Snippets_Wpf/InputOvw/VisualBasic/Page1.xaml.vb#input_ovwtextinputhandlerscodebehind)]

 <span data-ttu-id="0b559-185">Dado que los eventos de entrada propagan la ruta del evento, el <xref:System.Windows.Controls.StackPanel> recibe la entrada independientemente del elemento que tenga el foco de teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-185">Because input events bubble up the event route, the <xref:System.Windows.Controls.StackPanel> receives the input regardless of which element has keyboard focus.</span></span> <span data-ttu-id="0b559-186">Primero se notifica al control <xref:System.Windows.Controls.TextBox> y se llama al controlador `OnTextInputKeyDown` solo si el <xref:System.Windows.Controls.TextBox> no controló la entrada.</span><span class="sxs-lookup"><span data-stu-id="0b559-186">The <xref:System.Windows.Controls.TextBox> control is notified first and the `OnTextInputKeyDown` handler is called only if the <xref:System.Windows.Controls.TextBox> did not handle the input.</span></span> <span data-ttu-id="0b559-187">Si se utiliza el evento <xref:System.Windows.UIElement.PreviewKeyDown> en lugar del evento <xref:System.Windows.UIElement.KeyDown>, se llama primero al controlador de `OnTextInputKeyDown`.</span><span class="sxs-lookup"><span data-stu-id="0b559-187">If the <xref:System.Windows.UIElement.PreviewKeyDown> event is used instead of the <xref:System.Windows.UIElement.KeyDown> event, the `OnTextInputKeyDown` handler is called first.</span></span>

 <span data-ttu-id="0b559-188">En este ejemplo, la lógica de control se escribe dos veces: una vez para CTRL+O y otra para el evento de clic del botón.</span><span class="sxs-lookup"><span data-stu-id="0b559-188">In this example, the handling logic is written two times—one time for CTRL+O, and again for button's click event.</span></span> <span data-ttu-id="0b559-189">Esto se puede simplificar mediante el uso de comandos, en lugar de controlar los eventos de entrada directamente.</span><span class="sxs-lookup"><span data-stu-id="0b559-189">This can be simplified by using commands, instead of handling the input events directly.</span></span>  <span data-ttu-id="0b559-190">Los comandos se describen en esta información general y en [Información general sobre comandos](commanding-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-190">Commands are discussed in this overview and in [Commanding Overview](commanding-overview.md).</span></span>

<a name="touch_and_manipulation"></a>
## <a name="touch-and-manipulation"></a><span data-ttu-id="0b559-191">Funciones táctiles y manipulación</span><span class="sxs-lookup"><span data-stu-id="0b559-191">Touch and Manipulation</span></span>
 <span data-ttu-id="0b559-192">El nuevo hardware y la API en el sistema operativo Windows 7 proporcionan a las aplicaciones la capacidad de recibir entradas de varios toques simultáneamente.</span><span class="sxs-lookup"><span data-stu-id="0b559-192">New hardware and API in the Windows 7 operating system provide applications the ability to receive input from multiple touches simultaneously.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="0b559-193">permite que las aplicaciones detecten las funciones táctiles y respondan a ellas del mismo modo que con otras entradas, como el mouse o el teclado, y que generen eventos cuando se detecta un toque.</span><span class="sxs-lookup"><span data-stu-id="0b559-193">enables applications to detect and respond to touch in a manner similar to responding to other input, such as the mouse or keyboard, by raising events when touch occurs.</span></span>

 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="0b559-194">expone dos tipos de eventos cuando se usa una función táctil: eventos de función táctil y eventos de manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-194">exposes two types of events when touch occurs: touch events and manipulation events.</span></span> <span data-ttu-id="0b559-195">Los eventos de función táctil proporcionan datos sin procesar sobre cada dedo en una pantalla táctil y su movimiento.</span><span class="sxs-lookup"><span data-stu-id="0b559-195">Touch events provide raw data about each finger on a touchscreen and its movement.</span></span> <span data-ttu-id="0b559-196">Los eventos de manipulación interpretan la entrada como determinadas acciones.</span><span class="sxs-lookup"><span data-stu-id="0b559-196">Manipulation events interpret the input as certain actions.</span></span> <span data-ttu-id="0b559-197">Ambos tipos de eventos se describen en esta sección.</span><span class="sxs-lookup"><span data-stu-id="0b559-197">Both types of events are discussed in this section.</span></span>

### <a name="prerequisites"></a><span data-ttu-id="0b559-198">Requisitos previos</span><span class="sxs-lookup"><span data-stu-id="0b559-198">Prerequisites</span></span>
 <span data-ttu-id="0b559-199">Para desarrollar una aplicación que responda a las funciones táctiles, necesitará los componentes siguientes.</span><span class="sxs-lookup"><span data-stu-id="0b559-199">You need the following components to develop an application that responds to touch.</span></span>

- <span data-ttu-id="0b559-200">Visual Studio 2010.</span><span class="sxs-lookup"><span data-stu-id="0b559-200">Visual Studio 2010.</span></span>

- <span data-ttu-id="0b559-201">Windows 7.</span><span class="sxs-lookup"><span data-stu-id="0b559-201">Windows 7.</span></span>

- <span data-ttu-id="0b559-202">Un dispositivo, como una pantalla táctil, compatible con Windows Touch.</span><span class="sxs-lookup"><span data-stu-id="0b559-202">A device, such as a touchscreen, that supports Windows Touch.</span></span>

### <a name="terminology"></a><span data-ttu-id="0b559-203">Terminología</span><span class="sxs-lookup"><span data-stu-id="0b559-203">Terminology</span></span>
 <span data-ttu-id="0b559-204">Para referirse a la función táctil, se usan los términos siguientes.</span><span class="sxs-lookup"><span data-stu-id="0b559-204">The following terms are used when touch is discussed.</span></span>

- <span data-ttu-id="0b559-205">**La función táctil** es un tipo de entrada de usuario que reconoce Windows 7.</span><span class="sxs-lookup"><span data-stu-id="0b559-205">**Touch** is a type of user input that is recognized by Windows 7.</span></span> <span data-ttu-id="0b559-206">Normalmente, se inicia colocando los dedos en una pantalla táctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-206">Usually, touch is initiated by putting fingers on a touch-sensitive screen.</span></span> <span data-ttu-id="0b559-207">Tenga en cuenta que algunos dispositivos, como el panel táctil habitual en portátiles, no admiten la función táctil cuando se limitan a convertir la posición y el movimiento del dedo a entradas de mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-207">Note that devices such as a touchpad that is common on laptop computers do not support touch if the device merely converts the finger's position and movement as mouse input.</span></span>

- <span data-ttu-id="0b559-208">**La función multitáctil** es una función táctil que tiene lugar desde más de un punto de forma simultánea.</span><span class="sxs-lookup"><span data-stu-id="0b559-208">**Multitouch** is touch that occurs from more than one point simultaneously.</span></span> <span data-ttu-id="0b559-209">Windows 7 y [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] admiten la función multitáctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-209">Windows 7 and [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] supports multitouch.</span></span> <span data-ttu-id="0b559-210">Cada vez que se menciona la función táctil en la documentación de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], los conceptos se aplican a la función multitáctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-210">Whenever touch is discussed in the documentation for [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], the concepts apply to multitouch.</span></span>

- <span data-ttu-id="0b559-211">Una **manipulación** se produce cuando la función táctil se interpreta como una acción física que se aplica a un objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-211">A **manipulation** occurs when touch is interpreted as a physical action that is applied to an object.</span></span> <span data-ttu-id="0b559-212">En [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], los eventos de manipulación interpretan las entradas como una manipulación de traducción, expansión o rotación.</span><span class="sxs-lookup"><span data-stu-id="0b559-212">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], manipulation events interpret input as a translation, expansion, or rotation manipulation.</span></span>

- <span data-ttu-id="0b559-213">`touch device` representa un dispositivo que genera entradas táctiles, como un solo dedo en una pantalla táctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-213">A `touch device` represents a device that produces touch input, such as a single finger on a touchscreen.</span></span>

### <a name="controls-that-respond-to-touch"></a><span data-ttu-id="0b559-214">Controles que responden a la función táctil</span><span class="sxs-lookup"><span data-stu-id="0b559-214">Controls that Respond to Touch</span></span>
 <span data-ttu-id="0b559-215">Los siguientes controles se pueden desplazar al arrastrar un dedo por el control si tiene contenido que se desplaza fuera de la vista.</span><span class="sxs-lookup"><span data-stu-id="0b559-215">The following controls can be scrolled by dragging a finger across the control if it has content that is scrolled out of view.</span></span>

- <xref:System.Windows.Controls.ComboBox>

- <xref:System.Windows.Controls.ContextMenu>

- <xref:System.Windows.Controls.DataGrid>

- <xref:System.Windows.Controls.ListBox>

- <xref:System.Windows.Controls.ListView>

- <xref:System.Windows.Controls.MenuItem>

- <xref:System.Windows.Controls.TextBox>

- <xref:System.Windows.Controls.ToolBar>

- <xref:System.Windows.Controls.TreeView>

 <span data-ttu-id="0b559-216">El <xref:System.Windows.Controls.ScrollViewer> define el <xref:System.Windows.Controls.ScrollViewer.PanningMode%2A?displayProperty=nameWithType> propiedad adjunta que le permite especificar si el movimiento panorámico táctil está habilitado horizontalmente, verticalmente, ambos o ninguno.</span><span class="sxs-lookup"><span data-stu-id="0b559-216">The <xref:System.Windows.Controls.ScrollViewer> defines the <xref:System.Windows.Controls.ScrollViewer.PanningMode%2A?displayProperty=nameWithType> attached property that enables you to specify whether touch panning is enabled horizontally, vertically, both, or neither.</span></span> <span data-ttu-id="0b559-217">La propiedad <xref:System.Windows.Controls.ScrollViewer.PanningDeceleration%2A?displayProperty=nameWithType> especifica la rapidez con la que se ralentiza el desplazamiento cuando el usuario levanta el dedo de la pantalla táctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-217">The <xref:System.Windows.Controls.ScrollViewer.PanningDeceleration%2A?displayProperty=nameWithType> property specifies how quickly the scrolling slows down when the user lifts the finger from the touchscreen.</span></span> <span data-ttu-id="0b559-218">La propiedad adjunta de <xref:System.Windows.Controls.ScrollViewer.PanningRatio%2A?displayProperty=nameWithType> especifica la relación entre el desplazamiento para traducir el desplazamiento de manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-218">The <xref:System.Windows.Controls.ScrollViewer.PanningRatio%2A?displayProperty=nameWithType> attached property specifies the ratio of scrolling offset to translate manipulation offset.</span></span>

### <a name="touch-events"></a><span data-ttu-id="0b559-219">Eventos de funciones táctiles</span><span class="sxs-lookup"><span data-stu-id="0b559-219">Touch Events</span></span>
 <span data-ttu-id="0b559-220">Las clases base, <xref:System.Windows.UIElement>, <xref:System.Windows.UIElement3D>y <xref:System.Windows.ContentElement>, definen eventos a los que se puede suscribir para que la aplicación responda a la entrada táctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-220">The base classes, <xref:System.Windows.UIElement>, <xref:System.Windows.UIElement3D>, and <xref:System.Windows.ContentElement>, define events that you can subscribe to so your application will respond to touch.</span></span> <span data-ttu-id="0b559-221">Los eventos de funciones táctiles resultan útiles cuando la aplicación interpreta la función táctil como algo distinto a la manipulación de un objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-221">Touch events are useful when your application interprets touch as something other than manipulating an object.</span></span> <span data-ttu-id="0b559-222">Por ejemplo, una aplicación que permite a un usuario dibujar con uno o más dedos podría suscribirse a los eventos de función táctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-222">For example, an application that enables a user to draw with one or more fingers would subscribe to touch events.</span></span>

 <span data-ttu-id="0b559-223">Las tres clases definen los siguientes eventos, que se comportan de forma similar, independientemente de la clase de definición.</span><span class="sxs-lookup"><span data-stu-id="0b559-223">All three classes define the following events, which behave similarly, regardless of the defining class.</span></span>

- <xref:System.Windows.UIElement.TouchDown>

- <xref:System.Windows.UIElement.TouchMove>

- <xref:System.Windows.UIElement.TouchUp>

- <xref:System.Windows.UIElement.TouchEnter>

- <xref:System.Windows.UIElement.TouchLeave>

- <xref:System.Windows.UIElement.PreviewTouchDown>

- <xref:System.Windows.UIElement.PreviewTouchMove>

- <xref:System.Windows.UIElement.PreviewTouchUp>

- <xref:System.Windows.UIElement.GotTouchCapture>

- <xref:System.Windows.UIElement.LostTouchCapture>

 <span data-ttu-id="0b559-224">Del mismo modo que los eventos de teclado y mouse, los eventos de función táctil son eventos enrutados.</span><span class="sxs-lookup"><span data-stu-id="0b559-224">Like keyboard and mouse events, the touch events are routed events.</span></span> <span data-ttu-id="0b559-225">Los eventos que empiezan por `Preview` son eventos de tunelización, mientras que los que empiezan por `Touch` son eventos de propagación.</span><span class="sxs-lookup"><span data-stu-id="0b559-225">The events that begin with `Preview` are tunneling events and the events that begin with `Touch` are bubbling events.</span></span> <span data-ttu-id="0b559-226">Para obtener más información sobre los eventos enrutados, vea [Información general sobre eventos enrutados](routed-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-226">For more information about routed events, see [Routed Events Overview](routed-events-overview.md).</span></span> <span data-ttu-id="0b559-227">Al controlar estos eventos, puede obtener la posición de la entrada, relativa a cualquier elemento, llamando al método <xref:System.Windows.Input.TouchEventArgs.GetTouchPoint%2A> o <xref:System.Windows.Input.TouchEventArgs.GetIntermediateTouchPoints%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-227">When you handle these events, you can get the position of the input, relative to any element, by calling the <xref:System.Windows.Input.TouchEventArgs.GetTouchPoint%2A> or <xref:System.Windows.Input.TouchEventArgs.GetIntermediateTouchPoints%2A> method.</span></span>

 <span data-ttu-id="0b559-228">Para entender la interacción entre los eventos de función táctil, considere un escenario en que un usuario coloca un dedo en un elemento, lo mueve en el elemento y, a continuación, lo levanta.</span><span class="sxs-lookup"><span data-stu-id="0b559-228">To understand the interaction among the touch events, consider the scenario where a user puts one finger on an element, moves the finger in the element, and then lifts the finger from the element.</span></span> <span data-ttu-id="0b559-229">En la ilustración siguiente se muestra la ejecución de los eventos de propagación (los eventos de tunelización se omiten por motivos de simplicidad).</span><span class="sxs-lookup"><span data-stu-id="0b559-229">The following illustration shows the execution of the bubbling events (the tunneling events are omitted for simplicity).</span></span>

 <span data-ttu-id="0b559-230">![La secuencia de eventos Touch.](./media/ndp-touchevents.png "NDP_TouchEvents") Touch (eventos)</span><span class="sxs-lookup"><span data-stu-id="0b559-230">![The sequence of touch events.](./media/ndp-touchevents.png "NDP_TouchEvents") Touch events</span></span>

 <span data-ttu-id="0b559-231">En la lista siguiente se describe la secuencia de los eventos de la ilustración anterior.</span><span class="sxs-lookup"><span data-stu-id="0b559-231">The following list describes the sequence of the events in the preceding illustration.</span></span>

1. <span data-ttu-id="0b559-232">El evento <xref:System.Windows.UIElement.TouchEnter> se produce una vez cuando el usuario coloca un dedo en el elemento.</span><span class="sxs-lookup"><span data-stu-id="0b559-232">The <xref:System.Windows.UIElement.TouchEnter> event occurs one time when the user puts a finger on the element.</span></span>

2. <span data-ttu-id="0b559-233">El evento <xref:System.Windows.UIElement.TouchDown> se produce una vez.</span><span class="sxs-lookup"><span data-stu-id="0b559-233">The <xref:System.Windows.UIElement.TouchDown> event occurs one time.</span></span>

3. <span data-ttu-id="0b559-234">El evento <xref:System.Windows.UIElement.TouchMove> se produce varias veces cuando el usuario mueve el dedo dentro del elemento.</span><span class="sxs-lookup"><span data-stu-id="0b559-234">The <xref:System.Windows.UIElement.TouchMove> event occurs multiple times as the user moves the finger within the element.</span></span>

4. <span data-ttu-id="0b559-235">El evento <xref:System.Windows.UIElement.TouchUp> se produce una vez cuando el usuario levanta el dedo del elemento.</span><span class="sxs-lookup"><span data-stu-id="0b559-235">The <xref:System.Windows.UIElement.TouchUp> event occurs one time when the user lifts the finger from the element.</span></span>

5. <span data-ttu-id="0b559-236">El evento <xref:System.Windows.UIElement.TouchLeave> se produce una vez.</span><span class="sxs-lookup"><span data-stu-id="0b559-236">The <xref:System.Windows.UIElement.TouchLeave> event occurs one time.</span></span>

 <span data-ttu-id="0b559-237">Cuando se usan más de dos dedos, se producen eventos para cada dedo.</span><span class="sxs-lookup"><span data-stu-id="0b559-237">When more than two fingers are used, the events occur for each finger.</span></span>

### <a name="manipulation-events"></a><span data-ttu-id="0b559-238">Eventos de manipulación</span><span class="sxs-lookup"><span data-stu-id="0b559-238">Manipulation Events</span></span>
 <span data-ttu-id="0b559-239">En los casos en los que una aplicación permite a un usuario manipular un objeto, la clase <xref:System.Windows.UIElement> define los eventos de manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-239">For cases where an application enables a user to manipulate an object, the <xref:System.Windows.UIElement> class defines manipulation events.</span></span> <span data-ttu-id="0b559-240">A diferencia de los eventos de función táctil que, simplemente, notifican la posición de la función táctil, los eventos de manipulación indican cómo se puede interpretar la entrada.</span><span class="sxs-lookup"><span data-stu-id="0b559-240">Unlike the touch events that simply report the position of touch, the manipulation events report how the input can be interpreted.</span></span> <span data-ttu-id="0b559-241">Hay tres tipos de manipulación: traducción, expansión y rotación.</span><span class="sxs-lookup"><span data-stu-id="0b559-241">There are three types of manipulations, translation, expansion, and rotation.</span></span> <span data-ttu-id="0b559-242">En la lista siguiente se describe cómo invocar los tres tipos de manipulaciones.</span><span class="sxs-lookup"><span data-stu-id="0b559-242">The following list describes how to invoke the three types of manipulations.</span></span>

- <span data-ttu-id="0b559-243">Coloque un dedo en un objeto y mueva el dedo por la pantalla táctil para invocar una manipulación de traducción.</span><span class="sxs-lookup"><span data-stu-id="0b559-243">Put a finger on an object and move the finger across the touchscreen to invoke a translation manipulation.</span></span> <span data-ttu-id="0b559-244">Normalmente, esto mueve el objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-244">This usually moves the object.</span></span>

- <span data-ttu-id="0b559-245">Coloque dos dedos en un objeto y acérquelos o aléjelos para invocar una manipulación de expansión.</span><span class="sxs-lookup"><span data-stu-id="0b559-245">Put two fingers on an object and move the fingers closer together or farther apart from one another to invoke an expansion manipulation.</span></span> <span data-ttu-id="0b559-246">Normalmente, esto cambia el tamaño del objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-246">This usually resizes the object.</span></span>

- <span data-ttu-id="0b559-247">Coloque dos dedos en un objeto y gírelos entre sí para invocar una manipulación de rotación.</span><span class="sxs-lookup"><span data-stu-id="0b559-247">Put two fingers on an object and rotate the fingers around each other to invoke a rotation manipulation.</span></span> <span data-ttu-id="0b559-248">Normalmente, esto gira el objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-248">This usually rotates the object.</span></span>

 <span data-ttu-id="0b559-249">Se puede producir más de un tipo de manipulación al mismo tiempo.</span><span class="sxs-lookup"><span data-stu-id="0b559-249">More than one type of manipulation can occur simultaneously.</span></span>

 <span data-ttu-id="0b559-250">Cuando hace que los objetos respondan a manipulaciones, puede hacer que parezca que el objeto tenga inercia.</span><span class="sxs-lookup"><span data-stu-id="0b559-250">When you cause objects to respond to manipulations, you can have the object appear to have inertia.</span></span> <span data-ttu-id="0b559-251">Esto puede hacer que los objetos simulen el mundo físico.</span><span class="sxs-lookup"><span data-stu-id="0b559-251">This can make your objects simulate the physical world.</span></span> <span data-ttu-id="0b559-252">Por ejemplo, si empuja un libro encima de una mesa con suficiente fuerza, el libro seguirá moviéndose cuando lo suelte.</span><span class="sxs-lookup"><span data-stu-id="0b559-252">For example, when you push a book across a table, if you push hard enough the book will continue to move after you release it.</span></span> [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="0b559-253">le permite simular este comportamiento, ya que puede generar eventos de manipulación cuando los dedos del usuario liberan el objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-253">enables you to simulate this behavior by raising manipulation events after the user's fingers releases the object.</span></span>

 <span data-ttu-id="0b559-254">Para obtener información sobre cómo crear una aplicación que permita al usuario mover y girar un objeto, o cambiar su tamaño, consulte [Tutorial: Crear su primera aplicación táctil](walkthrough-creating-your-first-touch-application.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-254">For information about how to create an application that enables the user to move, resize, and rotate an object, see [Walkthrough: Creating Your First Touch Application](walkthrough-creating-your-first-touch-application.md).</span></span>

 <span data-ttu-id="0b559-255">El <xref:System.Windows.UIElement> define los siguientes eventos de manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-255">The <xref:System.Windows.UIElement> defines the following manipulation events.</span></span>

- <xref:System.Windows.UIElement.ManipulationStarting>

- <xref:System.Windows.UIElement.ManipulationStarted>

- <xref:System.Windows.UIElement.ManipulationDelta>

- <xref:System.Windows.UIElement.ManipulationInertiaStarting>

- <xref:System.Windows.UIElement.ManipulationCompleted>

- <xref:System.Windows.UIElement.ManipulationBoundaryFeedback>

 <span data-ttu-id="0b559-256">De forma predeterminada, un <xref:System.Windows.UIElement> no recibe estos eventos de manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-256">By default, a <xref:System.Windows.UIElement> does not receive these manipulation events.</span></span> <span data-ttu-id="0b559-257">Para recibir eventos de manipulación en un <xref:System.Windows.UIElement>, establezca <xref:System.Windows.UIElement.IsManipulationEnabled%2A?displayProperty=nameWithType> en `true`.</span><span class="sxs-lookup"><span data-stu-id="0b559-257">To receive manipulation events on a <xref:System.Windows.UIElement>, set <xref:System.Windows.UIElement.IsManipulationEnabled%2A?displayProperty=nameWithType> to `true`.</span></span>

#### <a name="the-execution-path-of-manipulation-events"></a><span data-ttu-id="0b559-258">Ruta de acceso de ejecución de eventos de manipulación</span><span class="sxs-lookup"><span data-stu-id="0b559-258">The Execution Path of Manipulation Events</span></span>
 <span data-ttu-id="0b559-259">Considere un escenario en que un usuario "lanza" un objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-259">Consider a scenario where a user "throws" an object.</span></span> <span data-ttu-id="0b559-260">El usuario coloca un dedo en el objeto, mueve el dedo por la pantalla táctil una distancia corta y, a continuación, lo levanta mientras se mueve.</span><span class="sxs-lookup"><span data-stu-id="0b559-260">The user puts a finger on the object, moves the finger across the touchscreen for a short distance, and then lifts the finger while it is moving.</span></span> <span data-ttu-id="0b559-261">El resultado es que el objeto se moverá bajo el dedo del usuario y lo seguirá haciendo cuando el usuario lo levante.</span><span class="sxs-lookup"><span data-stu-id="0b559-261">The result of this is that the object will move under the user's finger and continue to move after the user lifts the finger.</span></span>

 <span data-ttu-id="0b559-262">En la ilustración siguiente se muestra la ruta de acceso de ejecución de los eventos de manipulación e información importante sobre cada evento.</span><span class="sxs-lookup"><span data-stu-id="0b559-262">The following illustration shows the execution path of manipulation events and important information about each event.</span></span>

 <span data-ttu-id="0b559-263">![Secuencia de eventos de manipulación.](./media/ndp-manipulationevents.png "NDP_ManipulationEvents") Eventos de manipulación</span><span class="sxs-lookup"><span data-stu-id="0b559-263">![The sequence of manipulation events.](./media/ndp-manipulationevents.png "NDP_ManipulationEvents") Manipulation events</span></span>

 <span data-ttu-id="0b559-264">En la lista siguiente se describe la secuencia de los eventos de la ilustración anterior.</span><span class="sxs-lookup"><span data-stu-id="0b559-264">The following list describes the sequence of the events in the preceding illustration.</span></span>

1. <span data-ttu-id="0b559-265">El evento <xref:System.Windows.UIElement.ManipulationStarting> se produce cuando el usuario coloca un dedo en el objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-265">The <xref:System.Windows.UIElement.ManipulationStarting> event occurs when the user places a finger on the object.</span></span> <span data-ttu-id="0b559-266">Entre otras cosas, este evento le permite establecer la propiedad <xref:System.Windows.Input.ManipulationStartingEventArgs.ManipulationContainer%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-266">Among other things, this event allows you to set the <xref:System.Windows.Input.ManipulationStartingEventArgs.ManipulationContainer%2A> property.</span></span> <span data-ttu-id="0b559-267">En los eventos posteriores, la posición de la manipulación será relativa al <xref:System.Windows.Input.ManipulationStartingEventArgs.ManipulationContainer%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-267">In the subsequent events, the position of the manipulation will be relative to the <xref:System.Windows.Input.ManipulationStartingEventArgs.ManipulationContainer%2A>.</span></span> <span data-ttu-id="0b559-268">En otros eventos distintos de <xref:System.Windows.UIElement.ManipulationStarting>, esta propiedad es de solo lectura, por lo que el evento de <xref:System.Windows.UIElement.ManipulationStarting> es la única vez que se puede establecer esta propiedad.</span><span class="sxs-lookup"><span data-stu-id="0b559-268">In events other than <xref:System.Windows.UIElement.ManipulationStarting>, this property is read-only, so the <xref:System.Windows.UIElement.ManipulationStarting> event is the only time that you can set this property.</span></span>

2. <span data-ttu-id="0b559-269">El evento <xref:System.Windows.UIElement.ManipulationStarted> se produce a continuación.</span><span class="sxs-lookup"><span data-stu-id="0b559-269">The <xref:System.Windows.UIElement.ManipulationStarted> event occurs next.</span></span> <span data-ttu-id="0b559-270">Este evento indica el origen de la manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-270">This event reports the origin of the manipulation.</span></span>

3. <span data-ttu-id="0b559-271">El evento <xref:System.Windows.UIElement.ManipulationDelta> se produce varias veces a medida que se mueven los dedos de un usuario en una pantalla táctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-271">The <xref:System.Windows.UIElement.ManipulationDelta> event occurs multiple times as a user's fingers move on a touchscreen.</span></span> <span data-ttu-id="0b559-272">La propiedad <xref:System.Windows.Input.ManipulationDeltaEventArgs.DeltaManipulation%2A> de la clase <xref:System.Windows.Input.ManipulationDeltaEventArgs> notifica si la manipulación se interpreta como movimiento, expansión o traslación.</span><span class="sxs-lookup"><span data-stu-id="0b559-272">The <xref:System.Windows.Input.ManipulationDeltaEventArgs.DeltaManipulation%2A> property of the <xref:System.Windows.Input.ManipulationDeltaEventArgs> class reports whether the manipulation is interpreted as movement, expansion, or translation.</span></span> <span data-ttu-id="0b559-273">En este punto se realiza la mayoría del trabajo de manipulación de un objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-273">This is where you perform most of the work of manipulating an object.</span></span>

4. <span data-ttu-id="0b559-274">El evento <xref:System.Windows.UIElement.ManipulationInertiaStarting> se produce cuando los dedos del usuario pierden el contacto con el objeto.</span><span class="sxs-lookup"><span data-stu-id="0b559-274">The <xref:System.Windows.UIElement.ManipulationInertiaStarting> event occurs when the user's fingers lose contact with the object.</span></span> <span data-ttu-id="0b559-275">Este evento permite especificar la desaceleración de las manipulaciones durante la inercia.</span><span class="sxs-lookup"><span data-stu-id="0b559-275">This event enables you to specify the deceleration of the manipulations during inertia.</span></span> <span data-ttu-id="0b559-276">Esto sirve para que el objeto pueda emular espacios físicos o atributos diferentes, si así lo elige.</span><span class="sxs-lookup"><span data-stu-id="0b559-276">This is so your object can emulate different physical spaces or attributes if you choose.</span></span> <span data-ttu-id="0b559-277">Por ejemplo, suponga que la aplicación tiene dos objetos que representan elementos del mundo físico y que uno es más pesado que el otro.</span><span class="sxs-lookup"><span data-stu-id="0b559-277">For example, suppose your application has two objects that represent items in the physical world, and one is heavier than the other.</span></span> <span data-ttu-id="0b559-278">Puede hacer que el objeto más pesado disminuya su velocidad más rápidamente que el objeto ligero.</span><span class="sxs-lookup"><span data-stu-id="0b559-278">You can make the heavier object decelerate faster than the lighter object.</span></span>

5. <span data-ttu-id="0b559-279">El evento <xref:System.Windows.UIElement.ManipulationDelta> se produce varias veces a medida que se produce la inercia.</span><span class="sxs-lookup"><span data-stu-id="0b559-279">The <xref:System.Windows.UIElement.ManipulationDelta> event occurs multiple times as inertia occurs.</span></span> <span data-ttu-id="0b559-280">Tenga en cuenta que este evento se produce cuando los dedos del usuario se mueven por la pantalla táctil y [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] simula la inercia.</span><span class="sxs-lookup"><span data-stu-id="0b559-280">Note that this event occurs when the user's fingers move across the touchscreen and when [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] simulates inertia.</span></span> <span data-ttu-id="0b559-281">En otras palabras, <xref:System.Windows.UIElement.ManipulationDelta> se produce antes y después del evento <xref:System.Windows.UIElement.ManipulationInertiaStarting>.</span><span class="sxs-lookup"><span data-stu-id="0b559-281">In other words, <xref:System.Windows.UIElement.ManipulationDelta> occurs before and after the <xref:System.Windows.UIElement.ManipulationInertiaStarting> event.</span></span> <span data-ttu-id="0b559-282">La propiedad <xref:System.Windows.Input.ManipulationDeltaEventArgs.IsInertial%2A?displayProperty=nameWithType> notifica si el evento de <xref:System.Windows.UIElement.ManipulationDelta> se produce durante la inercia, de modo que puede comprobar esa propiedad y realizar diferentes acciones, en función de su valor.</span><span class="sxs-lookup"><span data-stu-id="0b559-282">The <xref:System.Windows.Input.ManipulationDeltaEventArgs.IsInertial%2A?displayProperty=nameWithType> property reports whether the <xref:System.Windows.UIElement.ManipulationDelta> event occurs during inertia, so you can check that property and perform different actions, depending on its value.</span></span>

6. <span data-ttu-id="0b559-283">El evento <xref:System.Windows.UIElement.ManipulationCompleted> se produce cuando finaliza la manipulación y cualquier inercia.</span><span class="sxs-lookup"><span data-stu-id="0b559-283">The <xref:System.Windows.UIElement.ManipulationCompleted> event occurs when the manipulation and any inertia ends.</span></span> <span data-ttu-id="0b559-284">Es decir, después de que se produzcan todos los eventos de <xref:System.Windows.UIElement.ManipulationDelta>, se produce el evento <xref:System.Windows.UIElement.ManipulationCompleted> para indicar que se ha completado la manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-284">That is, after all the <xref:System.Windows.UIElement.ManipulationDelta> events occur, the <xref:System.Windows.UIElement.ManipulationCompleted> event occurs to signal that the manipulation is complete.</span></span>

 <span data-ttu-id="0b559-285">La <xref:System.Windows.UIElement> también define el evento de <xref:System.Windows.UIElement.ManipulationBoundaryFeedback>.</span><span class="sxs-lookup"><span data-stu-id="0b559-285">The <xref:System.Windows.UIElement> also defines the <xref:System.Windows.UIElement.ManipulationBoundaryFeedback> event.</span></span> <span data-ttu-id="0b559-286">Este evento se produce cuando se llama al método <xref:System.Windows.Input.ManipulationDeltaEventArgs.ReportBoundaryFeedback%2A> en el evento <xref:System.Windows.UIElement.ManipulationDelta>.</span><span class="sxs-lookup"><span data-stu-id="0b559-286">This event occurs when the <xref:System.Windows.Input.ManipulationDeltaEventArgs.ReportBoundaryFeedback%2A> method is called in the <xref:System.Windows.UIElement.ManipulationDelta> event.</span></span> <span data-ttu-id="0b559-287">El evento <xref:System.Windows.UIElement.ManipulationBoundaryFeedback> permite a las aplicaciones o componentes proporcionar comentarios visuales cuando un objeto alcanza un límite.</span><span class="sxs-lookup"><span data-stu-id="0b559-287">The <xref:System.Windows.UIElement.ManipulationBoundaryFeedback> event enables applications or components to provide visual feedback when an object hits a boundary.</span></span> <span data-ttu-id="0b559-288">Por ejemplo, la clase <xref:System.Windows.Window> controla el evento <xref:System.Windows.UIElement.ManipulationBoundaryFeedback> para hacer que la ventana se mueva ligeramente cuando se encuentre su borde.</span><span class="sxs-lookup"><span data-stu-id="0b559-288">For example, the <xref:System.Windows.Window> class handles the <xref:System.Windows.UIElement.ManipulationBoundaryFeedback> event to cause the window to slightly move when its edge is encountered.</span></span>

 <span data-ttu-id="0b559-289">Puede cancelar la manipulación llamando al método <xref:System.Windows.Input.ManipulationStartingEventArgs.Cancel%2A> en los argumentos del evento en cualquier evento de manipulación excepto <xref:System.Windows.UIElement.ManipulationBoundaryFeedback> evento.</span><span class="sxs-lookup"><span data-stu-id="0b559-289">You can cancel the manipulation by calling the <xref:System.Windows.Input.ManipulationStartingEventArgs.Cancel%2A> method on the event arguments in any manipulation event except <xref:System.Windows.UIElement.ManipulationBoundaryFeedback> event.</span></span> <span data-ttu-id="0b559-290">Cuando se llama a <xref:System.Windows.Input.ManipulationStartingEventArgs.Cancel%2A>, ya no se generan los eventos de manipulación y se producen eventos de mouse para la entrada táctil.</span><span class="sxs-lookup"><span data-stu-id="0b559-290">When you call <xref:System.Windows.Input.ManipulationStartingEventArgs.Cancel%2A>, the manipulation events are no longer raised and mouse events occur for touch.</span></span> <span data-ttu-id="0b559-291">En la tabla siguiente se describe la relación entre el momento en que se cancela la manipulación y los eventos del mouse que se producen.</span><span class="sxs-lookup"><span data-stu-id="0b559-291">The following table describes the relationship between the time the manipulation is canceled and the mouse events that occur.</span></span>

|<span data-ttu-id="0b559-292">Evento con el que se llama al método Cancel</span><span class="sxs-lookup"><span data-stu-id="0b559-292">The event that Cancel is called in</span></span>|<span data-ttu-id="0b559-293">Eventos del mouse que se generan para entradas que ya se han producido</span><span class="sxs-lookup"><span data-stu-id="0b559-293">The mouse events that occur for input that already occurred</span></span>|
|----------------------------------------|-----------------------------------------------------------------|
|<span data-ttu-id="0b559-294"><xref:System.Windows.UIElement.ManipulationStarting> y <xref:System.Windows.UIElement.ManipulationStarted></span><span class="sxs-lookup"><span data-stu-id="0b559-294"><xref:System.Windows.UIElement.ManipulationStarting> and <xref:System.Windows.UIElement.ManipulationStarted></span></span>|<span data-ttu-id="0b559-295">Eventos de presión del mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-295">Mouse down events.</span></span>|
|<xref:System.Windows.UIElement.ManipulationDelta>|<span data-ttu-id="0b559-296">Eventos de presión y movimiento del mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-296">Mouse down and mouse move events.</span></span>|
|<span data-ttu-id="0b559-297"><xref:System.Windows.UIElement.ManipulationInertiaStarting> y <xref:System.Windows.UIElement.ManipulationCompleted></span><span class="sxs-lookup"><span data-stu-id="0b559-297"><xref:System.Windows.UIElement.ManipulationInertiaStarting> and <xref:System.Windows.UIElement.ManipulationCompleted></span></span>|<span data-ttu-id="0b559-298">Eventos de presión, movimiento y liberación del mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-298">Mouse down, mouse move, and mouse up events.</span></span>|

 <span data-ttu-id="0b559-299">Tenga en cuenta que si llama a <xref:System.Windows.Input.ManipulationStartingEventArgs.Cancel%2A> cuando la manipulación está en inercia, el método devuelve `false` y la entrada no genera eventos del mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-299">Note that if you call <xref:System.Windows.Input.ManipulationStartingEventArgs.Cancel%2A> when the manipulation is in inertia, the method returns `false` and the input does not raise mouse events.</span></span>

### <a name="the-relationship-between-touch-and-manipulation-events"></a><span data-ttu-id="0b559-300">Relación entre eventos de función táctil y manipulación</span><span class="sxs-lookup"><span data-stu-id="0b559-300">The Relationship Between Touch and Manipulation Events</span></span>
 <span data-ttu-id="0b559-301">Un <xref:System.Windows.UIElement> siempre puede recibir eventos de toque.</span><span class="sxs-lookup"><span data-stu-id="0b559-301">A <xref:System.Windows.UIElement> can always receive touch events.</span></span> <span data-ttu-id="0b559-302">Cuando la propiedad <xref:System.Windows.UIElement.IsManipulationEnabled%2A> está establecida en `true`, un <xref:System.Windows.UIElement> puede recibir eventos de manipulación y toque.</span><span class="sxs-lookup"><span data-stu-id="0b559-302">When the <xref:System.Windows.UIElement.IsManipulationEnabled%2A> property is set to `true`, a <xref:System.Windows.UIElement> can receive both touch and manipulation events.</span></span>  <span data-ttu-id="0b559-303">Si no se controla el evento <xref:System.Windows.UIElement.TouchDown> (es decir, se `false`la propiedad <xref:System.Windows.RoutedEventArgs.Handled%2A>), la lógica de manipulación captura la entrada táctil en el elemento y genera los eventos de manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-303">If the <xref:System.Windows.UIElement.TouchDown> event is not handled (that is, the <xref:System.Windows.RoutedEventArgs.Handled%2A> property is `false`), the manipulation logic captures the touch to the element and generates the manipulation events.</span></span> <span data-ttu-id="0b559-304">Si la propiedad <xref:System.Windows.RoutedEventArgs.Handled%2A> está establecida en `true` en el evento <xref:System.Windows.UIElement.TouchDown>, la lógica de manipulación no genera eventos de manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-304">If the <xref:System.Windows.RoutedEventArgs.Handled%2A> property is set to `true` in the <xref:System.Windows.UIElement.TouchDown> event, the manipulation logic does not generate manipulation events.</span></span> <span data-ttu-id="0b559-305">En la siguiente ilustración se muestra la relación entre los eventos de función táctil y los de manipulación.</span><span class="sxs-lookup"><span data-stu-id="0b559-305">The following illustration shows the relationship between touch events and manipulation events.</span></span>

 <span data-ttu-id="0b559-306">![Relación entre los eventos de toque y manipulación](./media/ndp-touchmanipulateevents.png "NDP_TouchManipulateEvents") eventos de toque y manipulación</span><span class="sxs-lookup"><span data-stu-id="0b559-306">![Relationship between touch and manipulation events](./media/ndp-touchmanipulateevents.png "NDP_TouchManipulateEvents") Touch and manipulation events</span></span>

 <span data-ttu-id="0b559-307">En la lista siguiente se describe la relación entre los eventos de función táctil y de manipulación que se muestra en la ilustración anterior.</span><span class="sxs-lookup"><span data-stu-id="0b559-307">The following list describes the relationship between the touch and manipulation events that is shown in the preceding illustration.</span></span>

- <span data-ttu-id="0b559-308">Cuando el primer dispositivo táctil genera un evento de <xref:System.Windows.UIElement.TouchDown> en un <xref:System.Windows.UIElement>, la lógica de manipulación llama al método <xref:System.Windows.UIElement.CaptureTouch%2A>, que genera el evento <xref:System.Windows.UIElement.GotTouchCapture>.</span><span class="sxs-lookup"><span data-stu-id="0b559-308">When the first touch device generates a <xref:System.Windows.UIElement.TouchDown> event on a <xref:System.Windows.UIElement>, the manipulation logic calls the <xref:System.Windows.UIElement.CaptureTouch%2A> method, which generates the <xref:System.Windows.UIElement.GotTouchCapture> event.</span></span>

- <span data-ttu-id="0b559-309">Cuando se produce el <xref:System.Windows.UIElement.GotTouchCapture>, la lógica de manipulación llama al método <xref:System.Windows.Input.Manipulation.AddManipulator%2A?displayProperty=nameWithType>, que genera el evento <xref:System.Windows.UIElement.ManipulationStarting>.</span><span class="sxs-lookup"><span data-stu-id="0b559-309">When the <xref:System.Windows.UIElement.GotTouchCapture> occurs, the manipulation logic calls the <xref:System.Windows.Input.Manipulation.AddManipulator%2A?displayProperty=nameWithType> method, which generates the <xref:System.Windows.UIElement.ManipulationStarting> event.</span></span>

- <span data-ttu-id="0b559-310">Cuando se producen los eventos de <xref:System.Windows.UIElement.TouchMove>, la lógica de manipulación genera los eventos de <xref:System.Windows.UIElement.ManipulationDelta> que se producen antes del evento <xref:System.Windows.UIElement.ManipulationInertiaStarting>.</span><span class="sxs-lookup"><span data-stu-id="0b559-310">When the <xref:System.Windows.UIElement.TouchMove> events occur, the manipulation logic generates the <xref:System.Windows.UIElement.ManipulationDelta> events that occur before the <xref:System.Windows.UIElement.ManipulationInertiaStarting> event.</span></span>

- <span data-ttu-id="0b559-311">Cuando el último dispositivo táctil en el elemento provoca el evento <xref:System.Windows.UIElement.TouchUp>, la lógica de manipulación genera el evento <xref:System.Windows.UIElement.ManipulationInertiaStarting>.</span><span class="sxs-lookup"><span data-stu-id="0b559-311">When the last touch device on the element raises the <xref:System.Windows.UIElement.TouchUp> event, the manipulation logic generates the <xref:System.Windows.UIElement.ManipulationInertiaStarting> event.</span></span>

<a name="focus"></a>
## <a name="focus"></a><span data-ttu-id="0b559-312">Foco</span><span class="sxs-lookup"><span data-stu-id="0b559-312">Focus</span></span>
 <span data-ttu-id="0b559-313">Hay dos conceptos principales relacionados con el foco en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: el foco de teclado y el foco lógico.</span><span class="sxs-lookup"><span data-stu-id="0b559-313">There are two main concepts that pertain to focus in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)]: keyboard focus and logical focus.</span></span>

### <a name="keyboard-focus"></a><span data-ttu-id="0b559-314">Foco de teclado</span><span class="sxs-lookup"><span data-stu-id="0b559-314">Keyboard Focus</span></span>
 <span data-ttu-id="0b559-315">El foco de teclado hace referencia al elemento que recibe la entrada del teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-315">Keyboard focus refers to the element that is receiving keyboard input.</span></span>  <span data-ttu-id="0b559-316">Puede haber un único elemento en todo el escritorio que tenga el foco de teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-316">There can be only one element on the whole desktop that has keyboard focus.</span></span>  <span data-ttu-id="0b559-317">En [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], el elemento que tiene el foco de teclado tendrá <xref:System.Windows.IInputElement.IsKeyboardFocused%2A> establecido en `true`.</span><span class="sxs-lookup"><span data-stu-id="0b559-317">In [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], the element that has keyboard focus will have <xref:System.Windows.IInputElement.IsKeyboardFocused%2A> set to `true`.</span></span>  <span data-ttu-id="0b559-318">El método <xref:System.Windows.Input.Keyboard> estático <xref:System.Windows.Input.Keyboard.FocusedElement%2A> devuelve el elemento que tiene actualmente el foco de teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-318">The static <xref:System.Windows.Input.Keyboard> method <xref:System.Windows.Input.Keyboard.FocusedElement%2A> returns the element that currently has keyboard focus.</span></span>

 <span data-ttu-id="0b559-319">El foco de teclado se puede obtener haciendo tabulador a un elemento o haciendo clic con el mouse en determinados elementos, como un <xref:System.Windows.Controls.TextBox>.</span><span class="sxs-lookup"><span data-stu-id="0b559-319">Keyboard focus can be obtained by tabbing to an element or by clicking the mouse on certain elements, such as a <xref:System.Windows.Controls.TextBox>.</span></span>  <span data-ttu-id="0b559-320">El foco de teclado también se puede obtener mediante programación con el método <xref:System.Windows.Input.Keyboard.Focus%2A> en la clase <xref:System.Windows.Input.Keyboard>.</span><span class="sxs-lookup"><span data-stu-id="0b559-320">Keyboard focus can also be obtained programmatically by using the <xref:System.Windows.Input.Keyboard.Focus%2A> method on the <xref:System.Windows.Input.Keyboard> class.</span></span>  <span data-ttu-id="0b559-321"><xref:System.Windows.Input.Keyboard.Focus%2A> intenta proporcionar el foco de teclado del elemento especificado.</span><span class="sxs-lookup"><span data-stu-id="0b559-321"><xref:System.Windows.Input.Keyboard.Focus%2A> attempts to give the specified element keyboard focus.</span></span>  <span data-ttu-id="0b559-322">El elemento devuelto por <xref:System.Windows.Input.Keyboard.Focus%2A> es el elemento que tiene actualmente el foco de teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-322">The element returned by <xref:System.Windows.Input.Keyboard.Focus%2A> is the element that currently has keyboard focus.</span></span>

 <span data-ttu-id="0b559-323">Para que un elemento obtenga el foco de teclado, la propiedad <xref:System.Windows.UIElement.Focusable%2A> y las propiedades <xref:System.Windows.UIElement.IsVisible%2A> deben establecerse en **true**.</span><span class="sxs-lookup"><span data-stu-id="0b559-323">In order for an element to obtain keyboard focus the <xref:System.Windows.UIElement.Focusable%2A> property and the <xref:System.Windows.UIElement.IsVisible%2A> properties must be set to **true**.</span></span>  <span data-ttu-id="0b559-324">Algunas clases, como <xref:System.Windows.Controls.Panel>, tienen <xref:System.Windows.UIElement.Focusable%2A> establecido en `false` de forma predeterminada; por lo tanto, es posible que tenga que establecer esta propiedad en `true` si quiere que ese elemento pueda obtener el foco.</span><span class="sxs-lookup"><span data-stu-id="0b559-324">Some classes, such as <xref:System.Windows.Controls.Panel>, have <xref:System.Windows.UIElement.Focusable%2A> set to `false` by default; therefore, you may have to set this property to `true` if you want that element to be able to obtain focus.</span></span>

 <span data-ttu-id="0b559-325">En el ejemplo siguiente se usa <xref:System.Windows.Input.Keyboard.Focus%2A> para establecer el foco de teclado en un <xref:System.Windows.Controls.Button>.</span><span class="sxs-lookup"><span data-stu-id="0b559-325">The following example uses <xref:System.Windows.Input.Keyboard.Focus%2A> to set keyboard focus on a <xref:System.Windows.Controls.Button>.</span></span>  <span data-ttu-id="0b559-326">El lugar recomendado para establecer el foco inicial en una aplicación se encuentra en el controlador de eventos <xref:System.Windows.FrameworkElement.Loaded>.</span><span class="sxs-lookup"><span data-stu-id="0b559-326">The recommended place to set initial focus in an application is in the <xref:System.Windows.FrameworkElement.Loaded> event handler.</span></span>

 [!code-csharp[focussample#FocusSampleSetFocus](~/samples/snippets/csharp/VS_Snippets_Wpf/FocusSample/CSharp/Window1.xaml.cs#focussamplesetfocus)]
 [!code-vb[focussample#FocusSampleSetFocus](~/samples/snippets/visualbasic/VS_Snippets_Wpf/FocusSample/visualbasic/window1.xaml.vb#focussamplesetfocus)]

 <span data-ttu-id="0b559-327">Para obtener más información acerca del foco de teclado, consulte [Foco de teclado](focus-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-327">For more information about keyboard focus, see [Focus Overview](focus-overview.md).</span></span>

### <a name="logical-focus"></a><span data-ttu-id="0b559-328">Foco lógico</span><span class="sxs-lookup"><span data-stu-id="0b559-328">Logical Focus</span></span>
 <span data-ttu-id="0b559-329">El foco lógico hace referencia al <xref:System.Windows.Input.FocusManager.FocusedElement%2A?displayProperty=nameWithType> en un ámbito de foco.</span><span class="sxs-lookup"><span data-stu-id="0b559-329">Logical focus refers to the <xref:System.Windows.Input.FocusManager.FocusedElement%2A?displayProperty=nameWithType> in a focus scope.</span></span>  <span data-ttu-id="0b559-330">Puede haber varios elementos que tengan el foco lógico en una aplicación, pero solo puede haber uno con el foco lógico en un ámbito de foco concreto.</span><span class="sxs-lookup"><span data-stu-id="0b559-330">There can be multiple elements that have logical focus in an application, but there may only be one element that has logical focus in a particular focus scope.</span></span>

 <span data-ttu-id="0b559-331">Un ámbito de foco es un elemento contenedor que realiza un seguimiento de la <xref:System.Windows.Input.FocusManager.FocusedElement%2A> dentro de su ámbito.</span><span class="sxs-lookup"><span data-stu-id="0b559-331">A focus scope is a container element that keeps track of the <xref:System.Windows.Input.FocusManager.FocusedElement%2A> within its scope.</span></span>  <span data-ttu-id="0b559-332">Cuando el foco sale de un ámbito de foco, el elemento enfocado pierde el foco de teclado, pero conserva el foco lógico.</span><span class="sxs-lookup"><span data-stu-id="0b559-332">When focus leaves a focus scope, the focused element will lose keyboard focus but will retain logical focus.</span></span>  <span data-ttu-id="0b559-333">Cuando el foco vuelve al ámbito de foco, el elemento enfocado recibe el foco de teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-333">When focus returns to the focus scope, the focused element will obtain keyboard focus.</span></span>  <span data-ttu-id="0b559-334">Esto permite cambiar el foco de teclado entre varios ámbitos de foco, pero garantiza que el elemento enfocado dentro del ámbito siga siendo el elemento enfocado cuando vuelva el foco.</span><span class="sxs-lookup"><span data-stu-id="0b559-334">This allows for keyboard focus to be changed between multiple focus scopes but insures that the focused element within the focus scope remains the focused element when focus returns.</span></span>

 <span data-ttu-id="0b559-335">Un elemento se puede convertir en un ámbito de foco en [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] estableciendo la propiedad adjunta <xref:System.Windows.Input.FocusManager> <xref:System.Windows.Input.FocusManager.IsFocusScope%2A> en `true`o en el código estableciendo la propiedad adjunta mediante el método <xref:System.Windows.Input.FocusManager.SetIsFocusScope%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-335">An element can be turned into a focus scope in [!INCLUDE[TLA#tla_xaml](../../../../includes/tlasharptla-xaml-md.md)] by setting the <xref:System.Windows.Input.FocusManager> attached property <xref:System.Windows.Input.FocusManager.IsFocusScope%2A> to `true`, or in code by setting the attached property by using the <xref:System.Windows.Input.FocusManager.SetIsFocusScope%2A> method.</span></span>

 <span data-ttu-id="0b559-336">En el ejemplo siguiente se convierte un <xref:System.Windows.Controls.StackPanel> en un ámbito de foco estableciendo la propiedad adjunta <xref:System.Windows.Input.FocusManager.IsFocusScope%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-336">The following example makes a <xref:System.Windows.Controls.StackPanel> into a focus scope by setting the <xref:System.Windows.Input.FocusManager.IsFocusScope%2A> attached property.</span></span>

 [!code-xaml[MarkupSnippets#MarkupIsFocusScopeXAML](~/samples/snippets/csharp/VS_Snippets_Wpf/MarkupSnippets/CSharp/Window1.xaml#markupisfocusscopexaml)]

 [!code-csharp[FocusSnippets#FocusSetIsFocusScope](~/samples/snippets/csharp/VS_Snippets_Wpf/FocusSnippets/CSharp/Window1.xaml.cs#focussetisfocusscope)]
 [!code-vb[FocusSnippets#FocusSetIsFocusScope](~/samples/snippets/visualbasic/VS_Snippets_Wpf/FocusSnippets/visualbasic/window1.xaml.vb#focussetisfocusscope)]

 <span data-ttu-id="0b559-337">De forma predeterminada, las clases de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] que son ámbitos de foco son <xref:System.Windows.Window>, <xref:System.Windows.Controls.Menu>, <xref:System.Windows.Controls.ToolBar>y <xref:System.Windows.Controls.ContextMenu>.</span><span class="sxs-lookup"><span data-stu-id="0b559-337">Classes in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] which are focus scopes by default are <xref:System.Windows.Window>, <xref:System.Windows.Controls.Menu>, <xref:System.Windows.Controls.ToolBar>, and <xref:System.Windows.Controls.ContextMenu>.</span></span>

 <span data-ttu-id="0b559-338">Un elemento que tiene el foco de teclado también tendrá el foco lógico del ámbito de foco al que pertenece; por lo tanto, establecer el foco en un elemento con el método <xref:System.Windows.Input.Keyboard.Focus%2A> en la clase <xref:System.Windows.Input.Keyboard> o las clases de elementos base intentarán proporcionar el foco de teclado y el foco lógico del elemento.</span><span class="sxs-lookup"><span data-stu-id="0b559-338">An element that has keyboard focus will also have logical focus for the focus scope it belongs to; therefore, setting focus on an element with the <xref:System.Windows.Input.Keyboard.Focus%2A> method on the <xref:System.Windows.Input.Keyboard> class or the base element classes will attempt to give the element keyboard focus and logical focus.</span></span>

 <span data-ttu-id="0b559-339">Para determinar el elemento con foco en un ámbito de foco, use <xref:System.Windows.Input.FocusManager.GetFocusedElement%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-339">To determine the focused element in a focus scope, use <xref:System.Windows.Input.FocusManager.GetFocusedElement%2A>.</span></span> <span data-ttu-id="0b559-340">Para cambiar el elemento con foco de un ámbito de foco, use <xref:System.Windows.Input.FocusManager.SetFocusedElement%2A>.</span><span class="sxs-lookup"><span data-stu-id="0b559-340">To change the focused element for a focus scope, use <xref:System.Windows.Input.FocusManager.SetFocusedElement%2A>.</span></span>

 <span data-ttu-id="0b559-341">Para obtener más información acerca del foco lógico, consulte [Foco lógico](focus-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-341">For more information about logical focus, see [Focus Overview](focus-overview.md).</span></span>

<a name="mouse_position"></a>
## <a name="mouse-position"></a><span data-ttu-id="0b559-342">Posición del mouse</span><span class="sxs-lookup"><span data-stu-id="0b559-342">Mouse Position</span></span>
 <span data-ttu-id="0b559-343">La API de entrada de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] proporciona información útil con respecto a los espacios de coordenadas.</span><span class="sxs-lookup"><span data-stu-id="0b559-343">The [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input API provides helpful information with regard to coordinate spaces.</span></span>  <span data-ttu-id="0b559-344">Por ejemplo, la coordenada `(0,0)` es la coordenada superior izquierda, pero ¿de qué elemento del árbol?</span><span class="sxs-lookup"><span data-stu-id="0b559-344">For example, coordinate `(0,0)` is the upper-left coordinate, but the upper-left of which element in the tree?</span></span> <span data-ttu-id="0b559-345">¿El elemento de destino de la entrada?</span><span class="sxs-lookup"><span data-stu-id="0b559-345">The element that is the input target?</span></span> <span data-ttu-id="0b559-346">¿El elemento adjunto al controlador de eventos?</span><span class="sxs-lookup"><span data-stu-id="0b559-346">The element you attached your event handler to?</span></span> <span data-ttu-id="0b559-347">¿O alguna otra cosa?</span><span class="sxs-lookup"><span data-stu-id="0b559-347">Or something else?</span></span> <span data-ttu-id="0b559-348">Para evitar confusiones, la API de entrada de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] requiere que especifique el marco de referencia al trabajar con las coordenadas obtenidas a través del mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-348">To avoid confusion, the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] input API requires that you specify your frame of reference when you work with coordinates obtained through the mouse.</span></span> <span data-ttu-id="0b559-349">El método <xref:System.Windows.Input.Mouse.GetPosition%2A> devuelve la coordenada del puntero del mouse en relación con el elemento especificado.</span><span class="sxs-lookup"><span data-stu-id="0b559-349">The <xref:System.Windows.Input.Mouse.GetPosition%2A> method returns the coordinate of the mouse pointer relative to the specified element.</span></span>

<a name="mouse_capture"></a>
## <a name="mouse-capture"></a><span data-ttu-id="0b559-350">Captura del mouse</span><span class="sxs-lookup"><span data-stu-id="0b559-350">Mouse Capture</span></span>
 <span data-ttu-id="0b559-351">Los dispositivos de mouse tienen una característica modal concreta que se denomina captura del mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-351">Mouse devices specifically hold a modal characteristic known as mouse capture.</span></span> <span data-ttu-id="0b559-352">La captura del mouse se usa para mantener un estado de entrada transitorio cuando se inicia una operación de arrastrar y colocar, para que otras operaciones relacionadas con la posición en pantalla nominal del puntero del mouse no se produzcan necesariamente.</span><span class="sxs-lookup"><span data-stu-id="0b559-352">Mouse capture is used to maintain a transitional input state when a drag-and-drop operation is started, so that other operations involving the nominal on-screen position of the mouse pointer do not necessarily occur.</span></span> <span data-ttu-id="0b559-353">Al arrastrar, el usuario no puede hacer clic sin anular la acción de arrastrar y colocar, lo que hace que la mayoría de las indicaciones que se producen al pasar el mouse sean inadecuadas mientras se conserva la captura del mouse desde el origen de la acción de arrastrar.</span><span class="sxs-lookup"><span data-stu-id="0b559-353">During the drag, the user cannot click without aborting the drag-and-drop, which makes most mouseover cues inappropriate while the mouse capture is held by the drag origin.</span></span> <span data-ttu-id="0b559-354">El sistema de entrada expone las API que pueden determinar el estado de la captura del mouse, así como las API que pueden forzar la captura del mouse a un elemento concreto o borrar el estado de la captura del mouse.</span><span class="sxs-lookup"><span data-stu-id="0b559-354">The input system exposes APIs that can determine mouse capture state, as well as APIs that can force mouse capture to a specific element, or clear mouse capture state.</span></span> <span data-ttu-id="0b559-355">Para obtener más información sobre las operaciones de arrastrar y colocar, consulte [Información general sobre la función de arrastrar y colocar](drag-and-drop-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-355">For more information on drag-and-drop operations, see [Drag and Drop Overview](drag-and-drop-overview.md).</span></span>

<a name="commands"></a>
## <a name="commands"></a><span data-ttu-id="0b559-356">Commands</span><span class="sxs-lookup"><span data-stu-id="0b559-356">Commands</span></span>
 <span data-ttu-id="0b559-357">Los comandos habilitan el control de entrada en un nivel más semántico que la entrada de dispositivos.</span><span class="sxs-lookup"><span data-stu-id="0b559-357">Commands enable input handling at a more semantic level than device input.</span></span>  <span data-ttu-id="0b559-358">Los comandos son directivas sencillas, como `Cut`, `Copy`, `Paste` o `Open`.</span><span class="sxs-lookup"><span data-stu-id="0b559-358">Commands are simple directives, such as `Cut`, `Copy`, `Paste`, or `Open`.</span></span>  <span data-ttu-id="0b559-359">Los comandos son útiles para centralizar la lógica de comando.</span><span class="sxs-lookup"><span data-stu-id="0b559-359">Commands are useful for centralizing your command logic.</span></span>  <span data-ttu-id="0b559-360">Se puede tener acceso al mismo comando desde un <xref:System.Windows.Controls.Menu>, en un <xref:System.Windows.Controls.ToolBar>o a través de un método abreviado de teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-360">The same command might be accessed from a <xref:System.Windows.Controls.Menu>, on a <xref:System.Windows.Controls.ToolBar>, or through a keyboard shortcut.</span></span> <span data-ttu-id="0b559-361">Los comandos también proporcionan un mecanismo para deshabilitar controles cuando el comando deja de estar disponible.</span><span class="sxs-lookup"><span data-stu-id="0b559-361">Commands also provide a mechanism for disabling controls when the command becomes unavailable.</span></span>

 <span data-ttu-id="0b559-362"><xref:System.Windows.Input.RoutedCommand> es la implementación de [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] de <xref:System.Windows.Input.ICommand>.</span><span class="sxs-lookup"><span data-stu-id="0b559-362"><xref:System.Windows.Input.RoutedCommand> is the [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] implementation of <xref:System.Windows.Input.ICommand>.</span></span>  <span data-ttu-id="0b559-363">Cuando se ejecuta un <xref:System.Windows.Input.RoutedCommand>, se generan una <xref:System.Windows.Input.CommandManager.PreviewExecuted> y un evento <xref:System.Windows.Input.CommandManager.Executed> en el destino del comando, que tunelizan y propagan por el árbol de elementos como otra entrada.</span><span class="sxs-lookup"><span data-stu-id="0b559-363">When a <xref:System.Windows.Input.RoutedCommand> is executed, a <xref:System.Windows.Input.CommandManager.PreviewExecuted> and an <xref:System.Windows.Input.CommandManager.Executed> event are raised on the command target, which tunnel and bubble through the element tree like other input.</span></span>  <span data-ttu-id="0b559-364">Si no se define ningún destino de comando, el elemento con el foco de teclado será el destino del comando.</span><span class="sxs-lookup"><span data-stu-id="0b559-364">If a command target is not set, the element with keyboard focus will be the command target.</span></span>  <span data-ttu-id="0b559-365">La lógica que realiza el comando se adjunta a un <xref:System.Windows.Input.CommandBinding>.</span><span class="sxs-lookup"><span data-stu-id="0b559-365">The logic that performs the command is attached to a <xref:System.Windows.Input.CommandBinding>.</span></span>  <span data-ttu-id="0b559-366">Cuando un evento de <xref:System.Windows.Input.CommandManager.Executed> alcanza un <xref:System.Windows.Input.CommandBinding> para ese comando concreto, se llama al <xref:System.Windows.Input.ExecutedRoutedEventHandler> en el <xref:System.Windows.Input.CommandBinding>.</span><span class="sxs-lookup"><span data-stu-id="0b559-366">When an <xref:System.Windows.Input.CommandManager.Executed> event reaches a <xref:System.Windows.Input.CommandBinding> for that specific command, the <xref:System.Windows.Input.ExecutedRoutedEventHandler> on the <xref:System.Windows.Input.CommandBinding> is called.</span></span>  <span data-ttu-id="0b559-367">Este controlador realiza la acción del comando.</span><span class="sxs-lookup"><span data-stu-id="0b559-367">This handler performs the action of the command.</span></span>

 <span data-ttu-id="0b559-368">Para obtener más información sobre los comandos, consulte [Información general sobre los comandos](commanding-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-368">For more information on commanding, see [Commanding Overview](commanding-overview.md).</span></span>

 [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] <span data-ttu-id="0b559-369">proporciona una biblioteca de comandos comunes que consta de <xref:System.Windows.Input.ApplicationCommands>, <xref:System.Windows.Input.MediaCommands>, <xref:System.Windows.Input.ComponentCommands>, <xref:System.Windows.Input.NavigationCommands>y <xref:System.Windows.Documents.EditingCommands>, o puede definir el suyo propio.</span><span class="sxs-lookup"><span data-stu-id="0b559-369">provides a library of common commands which consists of <xref:System.Windows.Input.ApplicationCommands>, <xref:System.Windows.Input.MediaCommands>, <xref:System.Windows.Input.ComponentCommands>, <xref:System.Windows.Input.NavigationCommands>, and <xref:System.Windows.Documents.EditingCommands>, or you can define your own.</span></span>

 <span data-ttu-id="0b559-370">En el ejemplo siguiente se muestra cómo configurar un <xref:System.Windows.Controls.MenuItem> de modo que, cuando se hace clic en él, se invoque el comando <xref:System.Windows.Input.ApplicationCommands.Paste%2A> en el <xref:System.Windows.Controls.TextBox>, suponiendo que el <xref:System.Windows.Controls.TextBox> tiene el foco de teclado.</span><span class="sxs-lookup"><span data-stu-id="0b559-370">The following example shows how to set up a <xref:System.Windows.Controls.MenuItem> so that when it is clicked it will invoke the <xref:System.Windows.Input.ApplicationCommands.Paste%2A> command on the <xref:System.Windows.Controls.TextBox>, assuming the <xref:System.Windows.Controls.TextBox> has keyboard focus.</span></span>

 [!code-xaml[CommandingOverviewSnippets#CommandingOverviewSimpleCommand](~/samples/snippets/csharp/VS_Snippets_Wpf/CommandingOverviewSnippets/CSharp/Window1.xaml#commandingoverviewsimplecommand)]

 [!code-csharp[CommandingOverviewSnippets#CommandingOverviewCommandTargetCodeBehind](~/samples/snippets/csharp/VS_Snippets_Wpf/CommandingOverviewSnippets/CSharp/Window1.xaml.cs#commandingoverviewcommandtargetcodebehind)]
 [!code-vb[CommandingOverviewSnippets#CommandingOverviewCommandTargetCodeBehind](~/samples/snippets/visualbasic/VS_Snippets_Wpf/CommandingOverviewSnippets/visualbasic/window1.xaml.vb#commandingoverviewcommandtargetcodebehind)]

 <span data-ttu-id="0b559-371">Para obtener más información sobre los comandos en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], consulte [Información general sobre comandos](commanding-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-371">For more information about commands in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)], see [Commanding Overview](commanding-overview.md).</span></span>

<a name="the_input_system_and_base_elements"></a>
## <a name="the-input-system-and-base-elements"></a><span data-ttu-id="0b559-372">Sistema de entrada y elementos base</span><span class="sxs-lookup"><span data-stu-id="0b559-372">The Input System and Base Elements</span></span>
 <span data-ttu-id="0b559-373">Los eventos de entrada, como los eventos adjuntos definidos por las clases <xref:System.Windows.Input.Mouse>, <xref:System.Windows.Input.Keyboard>y <xref:System.Windows.Input.Stylus>, los genera el sistema de entrada y se insertan en una posición determinada del modelo de objetos basándose en la prueba de posicionamiento del árbol visual en tiempo de ejecución.</span><span class="sxs-lookup"><span data-stu-id="0b559-373">Input events such as the attached events defined by the <xref:System.Windows.Input.Mouse>, <xref:System.Windows.Input.Keyboard>, and <xref:System.Windows.Input.Stylus> classes are raised by the input system and injected into a particular position in the object model based on hit testing the visual tree at run time.</span></span>

 <span data-ttu-id="0b559-374">Cada uno de los eventos que <xref:System.Windows.Input.Mouse>, <xref:System.Windows.Input.Keyboard>y <xref:System.Windows.Input.Stylus> definen como eventos adjuntos también se vuelve a exponer mediante las clases de elementos base <xref:System.Windows.UIElement> y <xref:System.Windows.ContentElement> como un nuevo evento enrutado.</span><span class="sxs-lookup"><span data-stu-id="0b559-374">Each of the events that <xref:System.Windows.Input.Mouse>, <xref:System.Windows.Input.Keyboard>, and <xref:System.Windows.Input.Stylus> define as an attached event is also re-exposed by the base element classes <xref:System.Windows.UIElement> and <xref:System.Windows.ContentElement> as a new routed event.</span></span> <span data-ttu-id="0b559-375">Los eventos enrutados de elementos base se generan desde clases que controlan el evento adjunto original y reutilizan los datos del evento.</span><span class="sxs-lookup"><span data-stu-id="0b559-375">The base element routed events are generated by classes handling the original attached event and reusing the event data.</span></span>

 <span data-ttu-id="0b559-376">Cuando el evento de entrada se asocia con un elemento de origen determinado a través de la implementación del evento de entrada de elemento base, se puede redirigir a través del resto de una ruta de evento que se basa en una combinación de objetos del árbol lógico y visual, y se puede controlar desde el código de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="0b559-376">When the input event becomes associated with a particular source element through its base element input event implementation, it can be routed through the remainder of an event route that is based on a combination of logical and visual tree objects, and be handled by application code.</span></span>  <span data-ttu-id="0b559-377">Por lo general, es más conveniente controlar estos eventos de entrada relacionados con el dispositivo mediante los eventos enrutados en <xref:System.Windows.UIElement> y <xref:System.Windows.ContentElement>, porque puede usar una sintaxis de controlador de eventos más intuitiva en [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] y en el código.</span><span class="sxs-lookup"><span data-stu-id="0b559-377">Generally, it is more convenient to handle these device-related input events using the routed events on <xref:System.Windows.UIElement> and <xref:System.Windows.ContentElement>, because you can use more intuitive event handler syntax both in [!INCLUDE[TLA2#tla_xaml](../../../../includes/tla2sharptla-xaml-md.md)] and in code.</span></span> <span data-ttu-id="0b559-378">También puede elegir controlar el evento adjunto que inició el proceso, pero tendría que enfrentarse a varios problemas: el evento adjunto puede estar marcado como controlado por el control de la clase de elemento base, y debe utilizar métodos de descriptor de acceso, en lugar de la sintaxis de eventos true a fin de adjuntar controladores para eventos adjuntos.</span><span class="sxs-lookup"><span data-stu-id="0b559-378">You could choose to handle the attached event that initiated the process instead, but you would face several issues: the attached event may be marked handled by the base element class handling, and you need to use accessor methods rather than true event syntax in order to attach handlers for attached events.</span></span>

<a name="whats_next"></a>
## <a name="whats-next"></a><span data-ttu-id="0b559-379">¿Qué debe hacer a continuación?</span><span class="sxs-lookup"><span data-stu-id="0b559-379">What's Next</span></span>
 <span data-ttu-id="0b559-380">Ahora dispone de varias técnicas para controlar la entrada en [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0b559-380">You now have several techniques to handle input in [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>  <span data-ttu-id="0b559-381">También debe tener una mejor comprensión de los distintos tipos de eventos de entrada y los mecanismos de eventos enrutados que usa [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span><span class="sxs-lookup"><span data-stu-id="0b559-381">You should also have an improved understanding of the various types of input events and the routed event mechanisms used by [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)].</span></span>

 <span data-ttu-id="0b559-382">Existen recursos adicionales que explican los elementos del marco de trabajo [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] y el enrutamiento de eventos con más detalle.</span><span class="sxs-lookup"><span data-stu-id="0b559-382">Additional resources are available that explain [!INCLUDE[TLA2#tla_winclient](../../../../includes/tla2sharptla-winclient-md.md)] framework elements and event routing in more detail.</span></span> <span data-ttu-id="0b559-383">Consulte los temas siguientes para obtener más información: [Información general sobre comandos](commanding-overview.md), [Información general sobre el foco](focus-overview.md), [Información general sobre elementos base](base-elements-overview.md), [Árboles en WPF](trees-in-wpf.md) e [Información general sobre eventos enrutados](routed-events-overview.md).</span><span class="sxs-lookup"><span data-stu-id="0b559-383">See the following overviews for more information, [Commanding Overview](commanding-overview.md), [Focus Overview](focus-overview.md), [Base Elements Overview](base-elements-overview.md), [Trees in WPF](trees-in-wpf.md), and [Routed Events Overview](routed-events-overview.md).</span></span>

## <a name="see-also"></a><span data-ttu-id="0b559-384">Vea también</span><span class="sxs-lookup"><span data-stu-id="0b559-384">See also</span></span>

- [<span data-ttu-id="0b559-385">Información general sobre el foco</span><span class="sxs-lookup"><span data-stu-id="0b559-385">Focus Overview</span></span>](focus-overview.md)
- [<span data-ttu-id="0b559-386">Información general sobre comandos</span><span class="sxs-lookup"><span data-stu-id="0b559-386">Commanding Overview</span></span>](commanding-overview.md)
- [<span data-ttu-id="0b559-387">Información general sobre eventos enrutados</span><span class="sxs-lookup"><span data-stu-id="0b559-387">Routed Events Overview</span></span>](routed-events-overview.md)
- [<span data-ttu-id="0b559-388">Información general sobre elementos base</span><span class="sxs-lookup"><span data-stu-id="0b559-388">Base Elements Overview</span></span>](base-elements-overview.md)
- [<span data-ttu-id="0b559-389">Propiedades</span><span class="sxs-lookup"><span data-stu-id="0b559-389">Properties</span></span>](properties-wpf.md)
