---
title: Procedimiento para crear un WSFederationHttpBinding
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- WCF, federation
- federation
ms.assetid: e54897d7-aa6c-46ec-a278-b2430c8c2e10
ms.openlocfilehash: c3ce90c74ae61dfcbfc0b05fc17b25fe0118e071
ms.sourcegitcommit: fbb8a593a511ce667992502a3ce6d8f65c594edf
ms.translationtype: MT
ms.contentlocale: es-ES
ms.lasthandoff: 11/16/2019
ms.locfileid: "74141698"
---
# <a name="how-to-create-a-wsfederationhttpbinding"></a><span data-ttu-id="6445e-102">Procedimiento para crear un WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="6445e-102">How to: Create a WSFederationHttpBinding</span></span>

<span data-ttu-id="6445e-103">En Windows Communication Foundation (WCF), la clase <xref:System.ServiceModel.WSFederationHttpBinding> ([\<wsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) en la configuración) proporciona un mecanismo para exponer un servicio federado.</span><span class="sxs-lookup"><span data-stu-id="6445e-103">In Windows Communication Foundation (WCF), the <xref:System.ServiceModel.WSFederationHttpBinding> class ([\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) in configuration) provides a mechanism for exposing a federated service.</span></span> <span data-ttu-id="6445e-104">Es decir, un servicio que exige a los clientes su autenticación mediante un token de seguridad emitido por un servicio de token de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-104">That is, a service that requires clients to authenticate using a security token issued by a security token service.</span></span> <span data-ttu-id="6445e-105">Este tema muestra cómo configurar un <xref:System.ServiceModel.WSFederationHttpBinding> tanto en el código y como en la configuración.</span><span class="sxs-lookup"><span data-stu-id="6445e-105">This topic shows how to set up a <xref:System.ServiceModel.WSFederationHttpBinding> in both code and configuration.</span></span> <span data-ttu-id="6445e-106">Una vez creado el enlace, puede configurar un punto de conexión para que utilice dicho enlace.</span><span class="sxs-lookup"><span data-stu-id="6445e-106">Once the binding is created, you can set up an endpoint to use that binding.</span></span>

 <span data-ttu-id="6445e-107">A continuación se describen los pasos básicos:</span><span class="sxs-lookup"><span data-stu-id="6445e-107">The basic steps are outlined as follows:</span></span>

1. <span data-ttu-id="6445e-108">Seleccione un modo de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-108">Select a security mode.</span></span> <span data-ttu-id="6445e-109"><xref:System.ServiceModel.WSFederationHttpBinding> admite `Message`, que proporciona seguridad global en el nivel de mensaje, incluso a través de múltiples saltos, y `TransportWithMessageCredential`, que ofrece el mejor rendimiento para los casos en los que el cliente y el servicio pueden realizar una conexión directa sobre HTTPS.</span><span class="sxs-lookup"><span data-stu-id="6445e-109">The <xref:System.ServiceModel.WSFederationHttpBinding> supports `Message`, which provides end-to-end security at the message level, even across multiple hops, and `TransportWithMessageCredential`, which provides better performance in cases where the client and the service can make a direct connection over HTTPS.</span></span>

    > [!NOTE]
    > <span data-ttu-id="6445e-110"><xref:System.ServiceModel.WSFederationHttpBinding> también admite `None` como modo de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-110">The <xref:System.ServiceModel.WSFederationHttpBinding> also supports `None` as a security mode.</span></span> <span data-ttu-id="6445e-111">Este modo no es seguro y se ofrece solo para fines de depuración.</span><span class="sxs-lookup"><span data-stu-id="6445e-111">This mode is not secure and is provided for debugging purposes only.</span></span> <span data-ttu-id="6445e-112">Si un punto de conexión de servicio se implementa con un <xref:System.ServiceModel.WSFederationHttpBinding> con su modo de seguridad establecido en `None`, el enlace de cliente resultante (generado por la [herramienta de utilidad de metadatos de ServiceModel (SvcUtil. exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) es un <xref:System.ServiceModel.WSHttpBinding> con un modo de seguridad `None`.</span><span class="sxs-lookup"><span data-stu-id="6445e-112">If a service endpoint is deployed with a <xref:System.ServiceModel.WSFederationHttpBinding> with its security mode set to `None`, the resulting client binding (generated by the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../../../../docs/framework/wcf/servicemodel-metadata-utility-tool-svcutil-exe.md)) is a <xref:System.ServiceModel.WSHttpBinding> with a security mode of `None`.</span></span>

     <span data-ttu-id="6445e-113">A diferencia de otros enlaces proporcionados por el sistema, no es necesario seleccionar un tipo de credencial de cliente cuando se utiliza `WSFederationHttpBinding`.</span><span class="sxs-lookup"><span data-stu-id="6445e-113">Unlike other system-provided bindings, it is not necessary to select a client credential type when using the `WSFederationHttpBinding`.</span></span> <span data-ttu-id="6445e-114">Esto es porque el tipo de credenciales de cliente siempre es un token emitido.</span><span class="sxs-lookup"><span data-stu-id="6445e-114">This is because the client credential type is always an issued token.</span></span> <span data-ttu-id="6445e-115">WCF adquiere un token de un emisor especificado y presenta ese token al servicio para autenticar el cliente.</span><span class="sxs-lookup"><span data-stu-id="6445e-115">WCF acquires a token from a specified issuer and presents that token to the service to authenticate the client.</span></span>

2. <span data-ttu-id="6445e-116">En clientes federados, se establece la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> para la dirección URL del servicio de token de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-116">On federated clients, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property to the URL of the security token service.</span></span> <span data-ttu-id="6445e-117">Establezca <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> como el enlace utilizado para comunicar con el servicio de token de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-117">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> to the binding to use to communicate with the security token service.</span></span>

3. <span data-ttu-id="6445e-118">Opcional.</span><span class="sxs-lookup"><span data-stu-id="6445e-118">Optional.</span></span> <span data-ttu-id="6445e-119">Establezca la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> en el Identificador uniforme de recursos (URI) de un tipo de token.</span><span class="sxs-lookup"><span data-stu-id="6445e-119">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the Uniform Resource Identifier (URI) of a token type.</span></span> <span data-ttu-id="6445e-120">En servicios federados, especifique el tipo de token que el servicio espera.</span><span class="sxs-lookup"><span data-stu-id="6445e-120">On federated services, specify the token type that the service expects.</span></span> <span data-ttu-id="6445e-121">En clientes federados, especifique el tipo de token que el cliente solicita al servicio de token de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-121">On federated clients, specify the token type the client requests from the security token service.</span></span>

     <span data-ttu-id="6445e-122">Si no se especifica ningún tipo de token, los clientes generan las solicitudes de tokens de seguridad (RST) de WS-Trust sin un URI del tipo de token, y los servicios asumen que la autenticación del cliente se realiza utilizando, de manera predeterminada, un token de Lenguaje de marcado de aserción de seguridad (SAML) 1.1.</span><span class="sxs-lookup"><span data-stu-id="6445e-122">If no token type is specified, clients generate WS-Trust Request Security Tokens (RSTs) without a token type URI, and services expect client authentication using a Security Assertions Markup Language (SAML) 1.1 token by default.</span></span>

     <span data-ttu-id="6445e-123">El URI de un token SAML 1,1 es `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`.</span><span class="sxs-lookup"><span data-stu-id="6445e-123">The URI for a SAML 1.1 token is `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`.</span></span>

4. <span data-ttu-id="6445e-124">Opcional.</span><span class="sxs-lookup"><span data-stu-id="6445e-124">Optional.</span></span> <span data-ttu-id="6445e-125">En servicios federados, establezca la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> como la dirección URL de los metadatos de un servicio de token de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-125">On federated services, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerMetadataAddress%2A> property to the metadata URL of a security token service.</span></span> <span data-ttu-id="6445e-126">Si el servicio está configurado para publicar metadatos, el extremo de los metadatos permite a los clientes del servicio seleccionar un par enlace/extremo adecuado.</span><span class="sxs-lookup"><span data-stu-id="6445e-126">The metadata endpoint enables clients of the service to select an appropriate binding/endpoint pair, if the service is configured to publish metadata.</span></span> <span data-ttu-id="6445e-127">Para obtener más información sobre la publicación de metadatos, vea [Publicar metadatos](publishing-metadata.md).</span><span class="sxs-lookup"><span data-stu-id="6445e-127">For more information about publishing metadata, see [Publishing Metadata](publishing-metadata.md).</span></span>

 <span data-ttu-id="6445e-128">También pueden establecerse otras propiedades, incluidos el tipo de clave utilizado como clave de prueba en el token emitido, el conjunto de algoritmos utilizado entre el cliente y el servicio, si negociar o especificar explícitamente la credencial del servicio, cualquier demanda concreta que el servicio espera que este contenido en el token emitido, y cualquier elemento XML adicional que deba agregarse a la solicitud que el cliente envía al servicio de token de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-128">You can also set other properties, including the type of key used as a proof key in the issued token, the algorithm suite to use between the client and the service, whether to negotiate or explicitly specify the service credential, any specific claims the service expects the issued token to contain, and any additional XML elements that must be added to the request the client sends to the security token service.</span></span>

> [!NOTE]
> <span data-ttu-id="6445e-129">La propiedad `NegotiateServiceCredential` es relevante únicamente cuando `SecurityMode` se establece como `Message`.</span><span class="sxs-lookup"><span data-stu-id="6445e-129">The `NegotiateServiceCredential` property is only relevant when the `SecurityMode` is set to `Message`.</span></span> <span data-ttu-id="6445e-130">Si `SecurityMode` se establece como `TransportWithMessageCredential`, se omite la propiedad `NegotiateServiceCredential`.</span><span class="sxs-lookup"><span data-stu-id="6445e-130">If `SecurityMode` is set to `TransportWithMessageCredential`, then the `NegotiateServiceCredential` property is ignored.</span></span>

## <a name="to-configure-a-wsfederationhttpbinding-in-code"></a><span data-ttu-id="6445e-131">Para configurar un WSFederationHttpBinding en código</span><span class="sxs-lookup"><span data-stu-id="6445e-131">To configure a WSFederationHttpBinding in code</span></span>

1. <span data-ttu-id="6445e-132">Cree una instancia de <xref:System.ServiceModel.WSFederationHttpBinding>.</span><span class="sxs-lookup"><span data-stu-id="6445e-132">Create an instance of the <xref:System.ServiceModel.WSFederationHttpBinding>.</span></span>

2. <span data-ttu-id="6445e-133">Establezca la propiedad <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> como <xref:System.ServiceModel.WSFederationHttpSecurityMode> o <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message>, según se requiera.</span><span class="sxs-lookup"><span data-stu-id="6445e-133">Set the <xref:System.ServiceModel.WSFederationHttpSecurity.Mode%2A> property to <xref:System.ServiceModel.WSFederationHttpSecurityMode> or <xref:System.ServiceModel.WSFederationHttpSecurityMode.Message> as required.</span></span> <span data-ttu-id="6445e-134">Si se requiere un conjunto de algoritmos distinto de <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A>, establezca la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> en un valor tomado de <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.</span><span class="sxs-lookup"><span data-stu-id="6445e-134">If an algorithm suite other than <xref:System.ServiceModel.Security.SecurityAlgorithmSuite.Basic256%2A> is required, set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.AlgorithmSuite%2A> property to a value taken from <xref:System.ServiceModel.Security.SecurityAlgorithmSuite>.</span></span>

3. <span data-ttu-id="6445e-135">Establezca la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> según corresponda.</span><span class="sxs-lookup"><span data-stu-id="6445e-135">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.NegotiateServiceCredential%2A> property as appropriate.</span></span>

4. <span data-ttu-id="6445e-136">Establezca la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> en <xref:System.IdentityModel.Tokens.SecurityKeyType>`SymmetricKey` o.`AsymmetricKey`</span><span class="sxs-lookup"><span data-stu-id="6445e-136">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedKeyType%2A> property to <xref:System.IdentityModel.Tokens.SecurityKeyType>`SymmetricKey` or .`AsymmetricKey`</span></span> <span data-ttu-id="6445e-137">según sea necesario.</span><span class="sxs-lookup"><span data-stu-id="6445e-137">as required.</span></span>

5. <span data-ttu-id="6445e-138">Establezca un valor adecuado para la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A>.</span><span class="sxs-lookup"><span data-stu-id="6445e-138">Set the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuedTokenType%2A> property to the appropriate value.</span></span> <span data-ttu-id="6445e-139">Si no se establece ningún valor, WCF toma como valor predeterminado `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`, que indica los tokens SAML 1,1.</span><span class="sxs-lookup"><span data-stu-id="6445e-139">If no value is set, WCF defaults to `http://docs.oasis-open.org/wss/oasis-wss-saml-token-profile-1.1#SAMLV1.1`, which indicates SAML 1.1 tokens.</span></span>

6. <span data-ttu-id="6445e-140">Obligatorio en el cliente si no se especifica ningún emisor local; opcional en el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-140">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="6445e-141">Cree <xref:System.ServiceModel.EndpointAddress> que contenga la dirección e información de identidad del servicio de token de seguridad, y asigne la instancia <xref:System.ServiceModel.EndpointAddress> a la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A>.</span><span class="sxs-lookup"><span data-stu-id="6445e-141">Create an <xref:System.ServiceModel.EndpointAddress> that contains the address and identity information of the security token service and assign the <xref:System.ServiceModel.EndpointAddress> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerAddress%2A> property.</span></span>

7. <span data-ttu-id="6445e-142">Obligatorio en el cliente si no se especifica ningún emisor local; no se utiliza en el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-142">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="6445e-143">Cree un <xref:System.ServiceModel.Channels.Binding> para la `SecurityTokenService` y asigne la instancia de <xref:System.ServiceModel.Channels.Binding> a la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A>.</span><span class="sxs-lookup"><span data-stu-id="6445e-143">Create a <xref:System.ServiceModel.Channels.Binding> for the `SecurityTokenService` and assign the <xref:System.ServiceModel.Channels.Binding> instance to the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.IssuerBinding%2A> property.</span></span>

8. <span data-ttu-id="6445e-144">No se utiliza en el cliente; opcional en el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-144">Not used on the client; optional on the service.</span></span> <span data-ttu-id="6445e-145">Cree una instancia <xref:System.ServiceModel.EndpointAddress> para los metadatos del servicio de token de seguridad, y asígnelo a la propiedad `IssuerMetadataAddress`.</span><span class="sxs-lookup"><span data-stu-id="6445e-145">Create an <xref:System.ServiceModel.EndpointAddress> instance for the metadata of the security token service and assign it to the `IssuerMetadataAddress` property.</span></span>

9. <span data-ttu-id="6445e-146">Opcional en el cliente y el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-146">Optional on both the client and the service.</span></span> <span data-ttu-id="6445e-147">Cree y agregue una o más instancias <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> a la colección devuelta por la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A>.</span><span class="sxs-lookup"><span data-stu-id="6445e-147">Create and add one or more <xref:System.ServiceModel.Security.Tokens.ClaimTypeRequirement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.ClaimTypeRequirements%2A> property.</span></span>

10. <span data-ttu-id="6445e-148">Opcional en el cliente y el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-148">Optional on both the client and the service.</span></span> <span data-ttu-id="6445e-149">Cree y agregue una o más instancias <xref:System.Xml.XmlElement> a la colección devuelta por la propiedad <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A>.</span><span class="sxs-lookup"><span data-stu-id="6445e-149">Create and add one or more <xref:System.Xml.XmlElement> instances to the collection returned by the <xref:System.ServiceModel.FederatedMessageSecurityOverHttp.TokenRequestParameters%2A> property.</span></span>

## <a name="to-create-a-federated-endpoint-in-configuration"></a><span data-ttu-id="6445e-150">Para crear un punto de conexión federado en la configuración</span><span class="sxs-lookup"><span data-stu-id="6445e-150">To create a federated endpoint in configuration</span></span>

1. <span data-ttu-id="6445e-151">Cree un [\<wsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) como elemento secundario del elemento [\<bindings >](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) del archivo de configuración de la aplicación.</span><span class="sxs-lookup"><span data-stu-id="6445e-151">Create a [\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) as a child of the [\<bindings>](../../../../docs/framework/configure-apps/file-schema/wcf/bindings.md) element in the application configuration file.</span></span>

2. <span data-ttu-id="6445e-152">Cree un [\<enlazar >](../../configure-apps/file-schema/wcf/bindings.md) elemento como elemento secundario de [\<wsFederationHttpBinding >](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) y establezca el atributo `name` en un valor adecuado.</span><span class="sxs-lookup"><span data-stu-id="6445e-152">Create a [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element as a child of [\<wsFederationHttpBinding>](../../../../docs/framework/configure-apps/file-schema/wcf/wsfederationhttpbinding.md) and set the `name` attribute to an appropriate value.</span></span>

3. <span data-ttu-id="6445e-153">Cree un elemento `<security>` como un elemento secundario del elemento [> de enlace de\<](../../configure-apps/file-schema/wcf/bindings.md) .</span><span class="sxs-lookup"><span data-stu-id="6445e-153">Create a `<security>` element as a child of the [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element.</span></span>

4. <span data-ttu-id="6445e-154">Establezca el atributo `mode` del elemento `<security>``TransportWithMessageCredential` con un valor de `Message` o , como se requiera.</span><span class="sxs-lookup"><span data-stu-id="6445e-154">Set the `mode` attribute on the `<security>` element to a value of `Message` or `TransportWithMessageCredential`, as required.</span></span>

5. <span data-ttu-id="6445e-155">Cree un elemento `<message>` como elemento secundario del elemento de `<security>`.</span><span class="sxs-lookup"><span data-stu-id="6445e-155">Create a `<message>` element as a child of the `<security>` element.</span></span>

6. <span data-ttu-id="6445e-156">Opcional.</span><span class="sxs-lookup"><span data-stu-id="6445e-156">Optional.</span></span> <span data-ttu-id="6445e-157">Establezca el atributo `algorithmSuite` del elemento `<message>` con un valor adecuado.</span><span class="sxs-lookup"><span data-stu-id="6445e-157">Set the `algorithmSuite` attribute on the `<message>` element with an appropriate value.</span></span> <span data-ttu-id="6445e-158">De manera predeterminada, es `Basic256`.</span><span class="sxs-lookup"><span data-stu-id="6445e-158">The default is `Basic256`.</span></span>

7. <span data-ttu-id="6445e-159">Opcional.</span><span class="sxs-lookup"><span data-stu-id="6445e-159">Optional.</span></span> <span data-ttu-id="6445e-160">Si se requiere una clave de prueba asimétrica, establezca el atributo `issuedKeyType` del elemento `<message>`AsymmetricKey como`AsymmetricKey`.</span><span class="sxs-lookup"><span data-stu-id="6445e-160">If an asymmetric proof key is required, set the `issuedKeyType` attribute of the `<message>` element to `AsymmetricKey`.</span></span> <span data-ttu-id="6445e-161">De manera predeterminada, es `SymmetricKey`.</span><span class="sxs-lookup"><span data-stu-id="6445e-161">The default is `SymmetricKey`.</span></span>

8. <span data-ttu-id="6445e-162">Opcional.</span><span class="sxs-lookup"><span data-stu-id="6445e-162">Optional.</span></span> <span data-ttu-id="6445e-163">Establezca el atributo `issuedTokenType` en el elemento `<message>`.</span><span class="sxs-lookup"><span data-stu-id="6445e-163">Set the `issuedTokenType` attribute on the `<message>` element.</span></span>

9. <span data-ttu-id="6445e-164">Obligatorio en el cliente si no se especifica ningún emisor local; opcional en el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-164">Required on the client if no local issuer is specified; optional on the service.</span></span> <span data-ttu-id="6445e-165">Cree un elemento `<issuer>` como elemento secundario del elemento `<message>`.</span><span class="sxs-lookup"><span data-stu-id="6445e-165">Create an `<issuer>` element as a child of the `<message>` element.</span></span>

10. <span data-ttu-id="6445e-166">Establezca el atributo `address` como el elemento `<issuer>`, y especifique la dirección en la que el servicio de token de seguridad acepta las solicitudes de token.</span><span class="sxs-lookup"><span data-stu-id="6445e-166">Set the `address` attribute to the `<issuer>` element and specify the address at which the security token service accepts token requests.</span></span>

11. <span data-ttu-id="6445e-167">Opcional.</span><span class="sxs-lookup"><span data-stu-id="6445e-167">Optional.</span></span> <span data-ttu-id="6445e-168">Agregue un elemento secundario `<identity>` y especifique la identidad del servicio de token de seguridad</span><span class="sxs-lookup"><span data-stu-id="6445e-168">Add an `<identity>` child element and specify the identity of the security token service</span></span>

12. <span data-ttu-id="6445e-169">Para obtener más información, consulte [identidad de servicio y autenticación](service-identity-and-authentication.md).</span><span class="sxs-lookup"><span data-stu-id="6445e-169">For more information, see [Service Identity and Authentication](service-identity-and-authentication.md).</span></span>

13. <span data-ttu-id="6445e-170">Obligatorio en el cliente si no se especifica ningún emisor local; no se utiliza en el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-170">Required on the client if no local issuer is specified; not used on the service.</span></span> <span data-ttu-id="6445e-171">Cree un [\<enlace de >](../../configure-apps/file-schema/wcf/bindings.md) elemento en la sección de enlaces que se puede usar para comunicarse con el servicio de token de seguridad.</span><span class="sxs-lookup"><span data-stu-id="6445e-171">Create a [\<binding>](../../configure-apps/file-schema/wcf/bindings.md) element in the bindings section that can be used to communicate with the security token service.</span></span> <span data-ttu-id="6445e-172">Para obtener más información sobre cómo crear un enlace, vea [cómo: Especifique un enlace de servicio en](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md)de configuración.</span><span class="sxs-lookup"><span data-stu-id="6445e-172">For more information about creating a binding, see [How to: Specify a Service Binding in Configuration](../../../../docs/framework/wcf/how-to-specify-a-service-binding-in-configuration.md).</span></span>

14. <span data-ttu-id="6445e-173">Especifique el enlace creado en el paso anterior estableciendo los atributos `binding` y `bindingConfiguration` del elemento `<issuer>`.</span><span class="sxs-lookup"><span data-stu-id="6445e-173">Specify the binding created in the previous step by setting the `binding` and `bindingConfiguration` attributes of the `<issuer>` element.</span></span>

15. <span data-ttu-id="6445e-174">No se utiliza en el cliente; opcional en el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-174">Not used on the client; optional on the service.</span></span> <span data-ttu-id="6445e-175">Cree un elemento `<issuerMetadata>` como elemento secundario del elemento de >`message`<.</span><span class="sxs-lookup"><span data-stu-id="6445e-175">Create an `<issuerMetadata>` element as a child of the <`message`> element.</span></span> <span data-ttu-id="6445e-176">A continuación, en un atributo `address` del elemento `<issuerMetadata>`, especifique la dirección en la que el servicio de token de seguridad publicará sus metadatos.</span><span class="sxs-lookup"><span data-stu-id="6445e-176">Then, in an `address` attribute on the `<issuerMetadata>` element, specify the address at which the security token service is to publish its metadata.</span></span> <span data-ttu-id="6445e-177">De manera opcional, agregue un elemento secundario `<identity>` y especifique la identidad del servicio de token de seguridad</span><span class="sxs-lookup"><span data-stu-id="6445e-177">Optionally, add an `<identity>` child element and specify the identity of the security token service.</span></span>

16. <span data-ttu-id="6445e-178">Opcional en el cliente y el servicio.</span><span class="sxs-lookup"><span data-stu-id="6445e-178">Optional on both the client and the service.</span></span> <span data-ttu-id="6445e-179">Agregue un elemento `<claimTypeRequirements>` como elemento secundario del elemento `<message>`.</span><span class="sxs-lookup"><span data-stu-id="6445e-179">Add a `<claimTypeRequirements>` element as a child of the `<message>` element.</span></span> <span data-ttu-id="6445e-180">Especifique las notificaciones obligatorias y opcionales en las que se basa el servicio agregando [\<agregar >](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elementos al elemento `<claimTypeRequirements>` y especificando el tipo de notificación con el atributo `claimType`.</span><span class="sxs-lookup"><span data-stu-id="6445e-180">Specify required and optional claims that the service relies on by adding [\<add>](../../../../docs/framework/configure-apps/file-schema/wcf/add-of-claimtyperequirements.md) elements to the `<claimTypeRequirements>` element and specifying the claim type with the `claimType` attribute.</span></span> <span data-ttu-id="6445e-181">Especifique si una notificación determinada es obligatoria u opcional estableciendo el atributo `isOptional`.</span><span class="sxs-lookup"><span data-stu-id="6445e-181">Specify whether a given claim is required or optional by setting the `isOptional` attribute.</span></span>

## <a name="example"></a><span data-ttu-id="6445e-182">Ejemplo</span><span class="sxs-lookup"><span data-stu-id="6445e-182">Example</span></span>

<span data-ttu-id="6445e-183">El ejemplo de código siguiente muestra el código para configurar `WSFederationHttpBinding` de manera imperativa.</span><span class="sxs-lookup"><span data-stu-id="6445e-183">The following code sample shows code for setting up a `WSFederationHttpBinding` imperatively.</span></span>

[!code-csharp[c_FederationBinding#2](~/samples/snippets/csharp/VS_Snippets_CFX/c_federationbinding/cs/source.cs#2)]
[!code-vb[c_FederationBinding#2](~/samples/snippets/visualbasic/VS_Snippets_CFX/c_federationbinding/vb/source.vb#2)]

## <a name="see-also"></a><span data-ttu-id="6445e-184">Vea también</span><span class="sxs-lookup"><span data-stu-id="6445e-184">See also</span></span>

- [<span data-ttu-id="6445e-185">Federación</span><span class="sxs-lookup"><span data-stu-id="6445e-185">Federation</span></span>](federation.md)
- [<span data-ttu-id="6445e-186">Ejemplo de federación</span><span class="sxs-lookup"><span data-stu-id="6445e-186">Federation Sample</span></span>](../../../../docs/framework/wcf/samples/federation-sample.md)
- <span data-ttu-id="6445e-187">[Cómo: Deshabilitar sesiones seguras en un](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md) de WSFederationHttpBinding</span><span class="sxs-lookup"><span data-stu-id="6445e-187">[How to: Disable Secure Sessions on a WSFederationHttpBinding](how-to-disable-secure-sessions-on-a-wsfederationhttpbinding.md)</span></span>
